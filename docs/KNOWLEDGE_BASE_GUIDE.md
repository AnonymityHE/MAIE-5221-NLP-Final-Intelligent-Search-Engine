# RAG知识库构建指南

## 问题背景

项目要求实现**Local RAG Implementation**，需要"处理并索引一组提供的文档"来确保系统能够检索和综合那些在公开网络上不可用的信息。但如果没有收到老师提供的PDF文档材料，我们应该从什么角度来构建知识库？

## 构建策略

### 策略1：从项目要求和测试集反推 ⭐⭐⭐⭐⭐（推荐）

**核心思路**：根据项目公告和测试集内容，推断需要什么类型的知识

#### 1.1 分析项目主题和测试集
- 仔细阅读 `docs/Project Announcement The Intelligent Search Engine.md`
- 如果有测试集文档，分析测试问题的主题和领域
- 关注项目要求的**领域特定智能**：
  - Weather（天气）
  - Transportation（交通）
  - Finance（金融）
  - **这些领域的专业文档可以作为知识库内容**

#### 1.2 推荐的知识库内容方向

**技术文档类**：
- RAG（检索增强生成）的原理和实现
- 向量数据库（Milvus）的使用文档
- LLM模型（如DeepSeek、Gemini）的技术文档
- 智能搜索引擎的架构设计

**领域专业知识**：
- **金融领域**：
  - 股票基础知识
  - 加密货币概念
  - 财报解读指南
  - 金融术语词典
- **交通领域**：
  - 公共交通系统介绍
  - 路线规划算法
  - 地理信息基础
- **天气领域**：
  - 气象学基础
  - 天气预报原理

### 策略2：构建项目自身的知识库 ⭐⭐⭐⭐

**核心思路**：将项目相关的所有文档索引到知识库

#### 2.1 项目文档索引
```bash
# 将这些文档放入 documents/ 目录并索引
- docs/Project Announcement The Intelligent Search Engine.md
- docs/Final WarmUp.md
- README.md
- 所有技术文档（README、API文档等）
```

**优势**：
- 用户查询"这个项目支持什么功能？"时，能从本地知识库回答
- 适合展示"本地知识库 vs 网页搜索"的区别
- 体现了RAG的核心价值：检索非公开信息

#### 2.2 创建项目FAQ文档
创建一个常见问题文档，包含：
- 项目的核心功能
- 技术栈说明
- 使用方法和示例
- 常见问题解答

### 策略3：收集公开但专业的知识 ⭐⭐⭐

**核心思路**：从公开资源收集专业知识，构建一个"专业的本地知识库"

#### 3.1 学术论文和技术报告
- **arXiv论文**：关于RAG、向量检索、LLM的论文
- **技术博客文章**：高质量的NLP/AI技术文章
- **官方文档**：Milvus、FastAPI、LangChain等框架文档

#### 3.2 领域知识库
- **金融知识**：
  - 收集上市公司财报（公开的）
  - 金融术语和概念解释
- **地理和交通**：
  - 城市公共交通信息
  - 地理知识（不依赖实时API的部分）
- **通用知识**：
  - 编程技术文档
  - 软件开发最佳实践

#### 3.3 数据来源建议
1. **官方文档导出**：
   - Milvus官方文档 → PDF
   - FastAPI文档 → PDF
   - Sentence Transformers文档

2. **技术博客整理**：
   - 收集高质量的技术博客文章
   - 整理成PDF或Markdown

3. **论文和报告**：
   - arXiv论文下载（PDF格式）
   - 学术会议的技术报告

### 策略4：创建合成知识库 ⭐⭐⭐

**核心思路**：主动创建与项目主题相关的文档

#### 4.1 创建测试文档
使用 `scripts/utils/create_test_doc.py` 创建示例文档，但扩展为：
- **NLP技术文档**：解释RAG、Embedding、向量检索等概念
- **项目架构文档**：详细描述系统架构和设计
- **领域知识文档**：
  - "如何理解股票价格波动"
  - "公共交通系统的工作原理"
  - "天气预报是如何生成的"

#### 4.2 文档示例结构
```
documents/
├── technical/
│   ├── rag_introduction.pdf          # RAG技术介绍
│   ├── vector_databases.pdf          # 向量数据库原理
│   └── llm_apis_guide.pdf            # LLM API使用指南
├── domain/
│   ├── finance_basics.pdf            # 金融基础知识
│   ├── transportation_systems.pdf     # 交通系统介绍
│   └── weather_forecasting.pdf        # 天气预报原理
└── project/
    ├── system_architecture.pdf        # 系统架构文档
    └── api_documentation.pdf          # API文档
```

### 策略5：结合测试集定制 ⭐⭐⭐⭐⭐（最推荐）

**核心思路**：如果有测试集，根据测试问题反推需要的知识

#### 5.1 分析测试问题模式
1. 下载/查看测试集文档：`docs/Test Questions Set 1.docx`
2. 分析问题类型：
   - 技术问题 → 需要技术文档
   - 金融问题 → 需要金融知识
   - 实时问题 → 主要依赖网页搜索
   - **综合问题** → 需要多领域知识

#### 5.2 针对性地构建
- 如果测试集涉及"RAG技术"，创建RAG技术文档
- 如果测试集涉及"向量检索"，创建向量检索文档
- **关键是确保测试集的问题能在你的知识库中找到相关答案**

## 实施建议

### 优先级排序

1. **第一步（必须）**：索引项目自身的文档
   ```bash
   # 将项目文档转为PDF或保持Markdown格式
   # 使用 ingest.py 或文件上传API索引
   ```

2. **第二步（推荐）**：根据测试集创建/收集相关文档
   - 分析测试问题
   - 针对性准备知识

3. **第三步（可选）**：扩展领域知识
   - 金融、交通、天气领域的专业文档

### 快速开始

#### 方案A：最小可行知识库
```bash
# 1. 创建项目文档
mkdir -p documents/project
cp docs/Project\ Announcement\ The\ Intelligent\ Search\ Engine.md documents/project/
cp README.md documents/project/

# 2. 使用工具转换为PDF（如果需要）
# 或者直接使用Markdown（修改ingest.py支持.md）

# 3. 索引文档
python scripts/utils/ingest.py
```

#### 方案B：完整知识库
```bash
# 1. 收集多个领域的文档
# 2. 放入 documents/ 目录
# 3. 批量索引

# 推荐文档来源：
# - Milvus官方文档（PDF）
# - FastAPI文档（PDF）
# - RAG相关技术文章（整理为PDF）
# - 金融/交通/天气基础知识的PDF
```

## 知识库质量要求

### 关键指标

1. **相关性**：知识库内容应该能回答测试集中的问题
2. **独特性**：应该包含网页搜索找不到的或不易找到的内容
3. **覆盖面**：涵盖项目要求的各个领域（技术、金融、交通等）

### 验证方法

```bash
# 测试知识库是否有效
# 1. 使用RAG查询API测试
curl -X POST "http://localhost:8000/api/rag/query" \
  -H "Content-Type: application/json" \
  -d '{"query": "RAG是什么？"}'

# 2. 检查返回结果是否来自本地知识库
# 3. 对比：如果关闭网页搜索，能否回答相关问题？
```

## 示例：创建领域知识文档

可以参考 `scripts/utils/create_test_doc.py` 的模式，创建：

```python
# 创建金融知识文档
finance_content = """
# 金融基础知识

## 股票价格
股票价格受多种因素影响：
1. 公司业绩
2. 市场情绪
3. 宏观经济环境
4. 行业趋势

## 财报解读
...

## 加密货币
...
"""

# 保存为PDF并索引
```

## 总结

**推荐策略组合**：
1. ✅ **索引项目自身文档**（快速，必须）
2. ✅ **分析测试集，针对性准备**（高效，推荐）
3. ✅ **收集领域专业知识**（完整，可选）

**核心原则**：
- **本地知识库应该包含网页搜索无法轻易获取的信息**
- **或者包含需要综合多份文档才能回答的问题**
- **知识库应该是"项目特定的"或"领域专业的"**

这样可以最好地展示RAG系统的价值：能够检索和综合本地知识库中的信息，而不完全依赖公开网络搜索。

