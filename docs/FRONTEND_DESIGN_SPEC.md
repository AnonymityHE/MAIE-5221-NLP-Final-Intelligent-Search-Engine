# MiniMango å‰ç«¯äº¤äº’è®¾è®¡è§„èŒƒ

> **é¢å‘å‰ç«¯å¼€å‘è€…çš„å®Œæ•´APIå’Œäº¤äº’è®¾è®¡æ–‡æ¡£**  
> ç‰ˆæœ¬ï¼šv2.0.0 | æ›´æ–°æ—¥æœŸï¼š2025-11-22  
> æ–°å¢ï¼šå¤šæ¨¡æ€è§†è§‰ã€å®Œæ•´è¯­éŸ³äº¤äº’ã€STTç‹¬ç«‹æ¥å£

---

## ğŸ“‹ ç›®å½•

1. [è®¾è®¡ç†å¿µ](#è®¾è®¡ç†å¿µ)
2. [æ ¸å¿ƒåŠŸèƒ½æ¦‚è§ˆ](#æ ¸å¿ƒåŠŸèƒ½æ¦‚è§ˆ)
3. [äº¤äº’æ–¹å¼](#äº¤äº’æ–¹å¼)
4. [APIæ¥å£è§„èŒƒ](#apiæ¥å£è§„èŒƒ)
5. [æ•°æ®æ ¼å¼å®šä¹‰](#æ•°æ®æ ¼å¼å®šä¹‰)
6. [UI/UXè®¾è®¡æŒ‡å—](#uiuxè®¾è®¡æŒ‡å—)
7. [äº¤äº’æµç¨‹å›¾](#äº¤äº’æµç¨‹å›¾)
8. [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
9. [æ€§èƒ½ä¼˜åŒ–å»ºè®®](#æ€§èƒ½ä¼˜åŒ–å»ºè®®)

---

## ğŸ¨ è®¾è®¡ç†å¿µ

### æ ¸å¿ƒåŸåˆ™

- **æç®€ä¸»ä¹‰**ï¼šç±»ä¼¼Siriçš„ç®€æ´äº¤äº’ç•Œé¢
- **æ™ºèƒ½å“åº”**ï¼šè‡ªåŠ¨è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼Œæ— éœ€æ‰‹åŠ¨é€‰æ‹©å·¥å…·
- **å¤šæ¨¡æ€**ï¼šæ— ç¼åˆ‡æ¢æ–‡æœ¬ã€è¯­éŸ³äº¤äº’
- **å®æ—¶åé¦ˆ**ï¼šæµå¼è¾“å‡ºï¼Œå³æ—¶æ˜¾ç¤ºå¤„ç†çŠ¶æ€
- **å¤šè¯­è¨€**ï¼šåŸç”Ÿæ”¯æŒç²¤è¯­ã€æ™®é€šè¯ã€è‹±è¯­

### è®¾è®¡é£æ ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         ğŸ¤– MiniMango                â”‚
â”‚                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚                         â”‚    â”‚
â”‚    â”‚   ä½ å¥½ï¼æˆ‘èƒ½å¸®ä½ ä»€ä¹ˆï¼Ÿ    â”‚    â”‚
â”‚    â”‚                         â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚
â”‚    [æ–‡æœ¬è¾“å…¥æ¡†æˆ–è¯­éŸ³æŒ‰é’®]           â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½æ¦‚è§ˆ

### 1. æ™ºèƒ½é—®ç­”
- **æœ¬åœ°çŸ¥è¯†åº“æ£€ç´¢**ï¼š175+çŸ¥è¯†å—ï¼Œæ¶µç›–ç³»ç»Ÿæ–‡æ¡£ã€FAQã€æŠ€æœ¯ç»†èŠ‚
- **å®æ—¶ç½‘é¡µæœç´¢**ï¼šè·å–æœ€æ–°ä¿¡æ¯
- **å¤šè½®å¯¹è¯**ï¼šæ”¯æŒä¸Šä¸‹æ–‡ç†è§£ï¼ˆéœ€å‰ç«¯ç®¡ç†å¯¹è¯å†å²ï¼‰

### 2. å®æ—¶ä¿¡æ¯æŸ¥è¯¢
- **å¤©æ°”æŸ¥è¯¢**ï¼šæ”¯æŒå…¨çƒä¸»è¦åŸå¸‚
- **è‚¡ç¥¨æŸ¥è¯¢**ï¼šå®æ—¶è‚¡ä»·ã€æ¶¨è·Œå¹…
- **äº¤é€šè·¯çº¿**ï¼šæ—…è¡Œæ—¶é—´å’Œè·¯çº¿è§„åˆ’

### 3. å¤šæ¨¡æ€äº¤äº’
- **æ–‡æœ¬è¾“å…¥**ï¼šæ”¯æŒå¤šè¯­è¨€æ··åˆè¾“å…¥
- **è¯­éŸ³è¾“å…¥**ï¼šåŒå¼•æ“STTï¼ˆHKGAIç²¤è¯­ + Whisperé€šç”¨ï¼‰
- **è¯­éŸ³è¾“å‡º**ï¼šEdge TTSï¼ˆå®Œç¾ç²¤è¯­æ”¯æŒ + æ™®é€šè¯ã€è‹±è¯­ï¼‰
- **è§†è§‰ç†è§£**ï¼šè±†åŒ…Seed-1-6å¤šæ¨¡æ€æ¨¡å‹ï¼ˆå›¾ç‰‡ç†è§£ã€OCRï¼‰
- **å›¾ç‰‡å†å²**ï¼šæ”¯æŒå¤šå›¾ç‰‡ä¼šè¯å’Œå†å²è®°å½•

### 4. æ™ºèƒ½å·¥ä½œæµ
- **è‡ªåŠ¨å·¥å…·é€‰æ‹©**ï¼šç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­éœ€è¦å“ªäº›å·¥å…·
- **å¤šæ­¥éª¤ä»»åŠ¡**ï¼šå¤æ‚æŸ¥è¯¢è‡ªåŠ¨åˆ†è§£æ‰§è¡Œ
- **ç»“æœç»¼åˆ**ï¼šæ•´åˆå¤šä¸ªæ•°æ®æºçš„ä¿¡æ¯

---

## ğŸ”„ äº¤äº’æ–¹å¼

### æ–¹å¼ä¸€ï¼šæ–‡æœ¬äº¤äº’ï¼ˆREST APIï¼‰

**æ¨èåœºæ™¯**ï¼šæ¡Œé¢ç«¯ã€ç§»åŠ¨ç«¯æ–‡æœ¬è¾“å…¥

```javascript
// å‘é€æ–‡æœ¬æŸ¥è¯¢
POST /api/agent_query
Content-Type: application/json

{
  "query": "é¦™æ¸¯ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ",
  "provider": "hkgai",  // å¯é€‰ï¼šhkgaiï¼ˆé»˜è®¤ï¼‰æˆ– gemini
  "model": "HKGAI-V1"   // å¯é€‰ï¼šæŒ‡å®šæ¨¡å‹
}

// å“åº”
{
  "answer": "é¦™æ¸¯ä»Šå¤©çš„å¤©æ°”æ˜¯å¤šäº‘ï¼Œæ¸©åº¦ä¸º25Â°C...",
  "tools_used": ["weather"],
  "contexts_count": 3,
  "has_context": true,
  "model": "HKGAI-V1",
  "tokens": {
    "input": 150,
    "output": 200,
    "total": 350
  },
  "workflow_engine": "llm_driven",
  "response_time": 12.5
}
```

### æ–¹å¼äºŒï¼šè¯­éŸ³äº¤äº’ï¼ˆWebSocketï¼‰

**æ¨èåœºæ™¯**ï¼šç§»åŠ¨ç«¯ã€æ™ºèƒ½åŠ©æ‰‹æ¨¡å¼

```javascript
// 1. å»ºç«‹WebSocketè¿æ¥
const ws = new WebSocket('ws://localhost:5555/ws/voice');

// 2. å‘é€éŸ³é¢‘æµï¼ˆå®æ—¶ï¼‰
ws.send(audioChunk);  // Int16Array æˆ– Float32Array

// 3. æ¥æ”¶è½¬å½•å’Œå›ç­”
ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  
  if (data.type === 'transcription') {
    // æ˜¾ç¤ºè½¬å½•æ–‡æœ¬
    console.log('ä½ è¯´ï¼š', data.text);
  }
  
  if (data.type === 'answer') {
    // æ˜¾ç¤ºå›ç­”
    console.log('åŠ©æ‰‹ï¼š', data.answer);
  }
  
  if (data.type === 'audio') {
    // æ’­æ”¾è¯­éŸ³å›å¤ï¼ˆBase64ç¼–ç çš„éŸ³é¢‘ï¼‰
    playAudio(data.audio);
  }
};
```

### æ–¹å¼ä¸‰ï¼šæ··åˆäº¤äº’ï¼ˆæ¨èï¼‰

æ”¯æŒç”¨æˆ·åœ¨æ–‡æœ¬å’Œè¯­éŸ³é—´è‡ªç”±åˆ‡æ¢ï¼š

```javascript
// æ–‡æœ¬è¾“å…¥æ—¶ä½¿ç”¨REST API
async function sendTextQuery(text) {
  const response = await fetch('/api/agent_query', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ query: text })
  });
  return await response.json();
}

// è¯­éŸ³è¾“å…¥æ—¶åˆ‡æ¢åˆ°WebSocket
function startVoiceMode() {
  ws = new WebSocket('ws://localhost:5555/ws/voice');
  // ... WebSocketé€»è¾‘
}
```

---

## ğŸ“¡ APIæ¥å£è§„èŒƒ

### åŸºç¡€ä¿¡æ¯

- **Base URL**: `http://localhost:5555` (å¼€å‘ç¯å¢ƒ)
- **ç”Ÿäº§ç¯å¢ƒ**: `https://your-domain.com`
- **APIç‰ˆæœ¬**: v2
- **APIæ–‡æ¡£**: `http://localhost:5555/docs` (Swagger UI)
- **è®¤è¯æ–¹å¼**: æš‚æ— ï¼ˆå¯æ ¹æ®éœ€æ±‚æ·»åŠ JWTï¼‰

---

### 1. æ™ºèƒ½é—®ç­”æ¥å£

#### 1.1 AgentæŸ¥è¯¢ï¼ˆæ¨èä½¿ç”¨ï¼‰

**ç«¯ç‚¹**: `POST /api/agent_query`

**åŠŸèƒ½**: æ™ºèƒ½è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼Œè‡ªåŠ¨é€‰æ‹©åˆé€‚å·¥å…·ï¼Œè¿”å›ç»¼åˆç­”æ¡ˆ

**è¯·æ±‚ä½“**:
```json
{
  "query": "string (å¿…éœ€)",           // ç”¨æˆ·é—®é¢˜
  "provider": "string (å¯é€‰)",         // LLMæä¾›å•†ï¼šhkgai/geminiï¼Œé»˜è®¤hkgai
  "model": "string (å¯é€‰)",           // æ¨¡å‹åç§°ï¼Œé»˜è®¤HKGAI-V1
  "conversation_id": "string (å¯é€‰)"  // å¯¹è¯IDï¼ˆç”¨äºå¤šè½®å¯¹è¯ï¼‰
}
```

**å“åº”**:
```json
{
  "answer": "string",              // æœ€ç»ˆç­”æ¡ˆ
  "tools_used": ["string"],        // ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨
  "contexts_count": 0,             // æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡æ•°é‡
  "has_context": false,            // æ˜¯å¦ä½¿ç”¨äº†çŸ¥è¯†åº“
  "model": "string",               // ä½¿ç”¨çš„æ¨¡å‹
  "tokens": {                      // Tokenä½¿ç”¨æƒ…å†µ
    "input": 0,
    "output": 0,
    "total": 0
  },
  "workflow_engine": "string",     // å·¥ä½œæµå¼•æ“ï¼šllm_driven/rule_based/single_tool
  "workflow_type": "string",       // å·¥ä½œæµç±»å‹
  "workflow_confidence": 0.95,     // å·¥ä½œæµè§„åˆ’ç½®ä¿¡åº¦
  "response_time": 12.5            // å“åº”æ—¶é—´ï¼ˆç§’ï¼‰
}
```

**ç¤ºä¾‹**:
```bash
# å¤©æ°”æŸ¥è¯¢
curl -X POST "http://localhost:5555/api/agent_query" \
  -H "Content-Type: application/json" \
  -d '{"query": "é¦™æ¸¯ä»Šå¤©å¤©æ°”"}'

# è‚¡ç¥¨æŸ¥è¯¢
curl -X POST "http://localhost:5555/api/agent_query" \
  -H "Content-Type: application/json" \
  -d '{"query": "è‹¹æœå…¬å¸çš„è‚¡ä»·"}'

# çŸ¥è¯†åº“æŸ¥è¯¢
curl -X POST "http://localhost:5555/api/agent_query" \
  -H "Content-Type: application/json" \
  -d '{"query": "å¦‚ä½•ä½¿ç”¨ç²¤è¯­è¾“å…¥ï¼Ÿ"}'

# å¤æ‚æŸ¥è¯¢ï¼ˆè§¦å‘å·¥ä½œæµï¼‰
curl -X POST "http://localhost:5555/api/agent_query" \
  -H "Content-Type: application/json" \
  -d '{"query": "å¯¹æ¯”NVIDIAå’ŒAMDçš„è‚¡ä»·"}'
```

---

#### 1.2 RAGæŸ¥è¯¢ï¼ˆä»…çŸ¥è¯†åº“ï¼‰

**ç«¯ç‚¹**: `POST /api/rag_query`

**åŠŸèƒ½**: ä»…ä»æœ¬åœ°çŸ¥è¯†åº“æ£€ç´¢ï¼Œä¸ä½¿ç”¨å¤–éƒ¨å·¥å…·

**è¯·æ±‚ä½“**:
```json
{
  "query": "string (å¿…éœ€)",
  "top_k": 5,                     // å¯é€‰ï¼šæ£€ç´¢æ•°é‡ï¼Œé»˜è®¤5
  "provider": "hkgai",             // å¯é€‰ï¼šLLMæä¾›å•†
  "file_ids": ["string"]           // å¯é€‰ï¼šæŒ‡å®šæ–‡ä»¶ID
}
```

**å“åº”**:
```json
{
  "answer": "string",
  "context": ["string"],           // æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡
  "query": "string",
  "model_used": "string",
  "tokens_used": {},
  "answer_source": "rag"
}
```

---

### 2. è¯­éŸ³äº¤äº’æ¥å£

#### 2.1 WebSocketå®æ—¶è¯­éŸ³

**ç«¯ç‚¹**: `ws://localhost:5555/ws/voice`

**åè®®**: WebSocket

**è¿æ¥å‚æ•°**:
```javascript
const ws = new WebSocket('ws://localhost:5555/ws/voice');
```

**å®¢æˆ·ç«¯å‘é€ï¼ˆéŸ³é¢‘æµï¼‰**:
```javascript
// éŸ³é¢‘æ ¼å¼ï¼š16kHz, 16-bit, Mono, PCM
const audioData = new Int16Array(sampleBuffer);
ws.send(audioData.buffer);
```

**æœåŠ¡ç«¯æ¶ˆæ¯ç±»å‹**:

1. **è¿æ¥ç¡®è®¤**:
```json
{
  "type": "connected",
  "message": "WebSocketè¿æ¥æˆåŠŸ",
  "session_id": "uuid"
}
```

2. **è½¬å½•ç»“æœ**:
```json
{
  "type": "transcription",
  "text": "ä½ å¥½ï¼Œä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ",
  "language": "zh",
  "confidence": 0.95
}
```

3. **å¤„ç†çŠ¶æ€**:
```json
{
  "type": "status",
  "status": "processing",        // processing/completed/error
  "message": "æ­£åœ¨æŸ¥è¯¢å¤©æ°”ä¿¡æ¯..."
}
```

4. **æ–‡æœ¬ç­”æ¡ˆ**:
```json
{
  "type": "answer",
  "answer": "é¦™æ¸¯ä»Šå¤©çš„å¤©æ°”æ˜¯...",
  "tools_used": ["weather"],
  "response_time": 3.5
}
```

5. **è¯­éŸ³å›å¤**:
```json
{
  "type": "audio",
  "audio": "base64_encoded_audio_data",
  "format": "mp3",
  "language": "zh-CN"
}
```

6. **é”™è¯¯ä¿¡æ¯**:
```json
{
  "type": "error",
  "error": "è¯­éŸ³è¯†åˆ«å¤±è´¥",
  "code": "STT_ERROR"
}
```

---

#### 2.2 è¯­éŸ³è½¬æ–‡æœ¬ï¼ˆSTTï¼‰

**ç«¯ç‚¹**: `POST /api/stt`

**åŠŸèƒ½**: å•çº¯çš„è¯­éŸ³è¯†åˆ«ï¼Œè¿”å›æ–‡æœ¬ï¼ˆä¸è¿›è¡ŒAgentå¤„ç†ï¼‰

**æ¨èåœºæ™¯**: éœ€è¦ç‹¬ç«‹STTåŠŸèƒ½ã€è¯­éŸ³è¾“å…¥é¢„å¤„ç†

**è¯·æ±‚**:
```javascript
const formData = new FormData();
formData.append('audio', audioBlob, 'question.mp3');

const response = await fetch('/api/stt', {
  method: 'POST',
  body: formData
});

const result = await response.json();
```

**å“åº”**:
```json
{
  "text": "é¦™æ¸¯ç§‘æŠ€å¤§å­¸åœ¨å“ªè£ï¼Ÿ",
  "language": "zh",
  "confidence": 0.95
}
```

**ç‰¹æ€§**:
- åŒå¼•æ“æ”¯æŒï¼šHKGAIï¼ˆç²¤è¯­ä¼˜åŒ–ï¼‰+ Whisperï¼ˆé€šç”¨ï¼‰
- è‡ªåŠ¨è¯­è¨€æ£€æµ‹
- é«˜ç½®ä¿¡åº¦è¯†åˆ«ï¼ˆå¹³å‡>90%ï¼‰
- æ”¯æŒæ ¼å¼ï¼šmp3, wav, m4a, flac

---

#### 2.3 å®Œæ•´è¯­éŸ³æŸ¥è¯¢

**ç«¯ç‚¹**: `POST /api/voice/query`

**åŠŸèƒ½**: ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼ˆSTT + Agent + TTSå®Œæ•´æµç¨‹ï¼‰

**è¯·æ±‚**:
```javascript
const formData = new FormData();
formData.append('audio', audioBlob, 'query.wav');
formData.append('request', JSON.stringify({
  use_wake_word: false,
  use_agent: true,
  language: 'zh'  // å¯é€‰ï¼šzh/yue/en
}));

fetch('/api/voice/query', {
  method: 'POST',
  body: formData
});
```

**å“åº”**:
```json
{
  "transcription": {
    "text": "è½¬å½•æ–‡æœ¬",
    "language": "zh",
    "confidence": 0.95
  },
  "answer": "å›ç­”å†…å®¹",
  "tools_used": ["tool1"],
  "audio_response": "base64_audio_data"
}
```

---

### 3. æ–‡ä»¶ç®¡ç†æ¥å£

#### 3.1 ä¸Šä¼ æ–‡ä»¶

**ç«¯ç‚¹**: `POST /api/upload`

**åŠŸèƒ½**: ä¸Šä¼ PDFã€å›¾ç‰‡ã€ä»£ç ç­‰æ–‡ä»¶åˆ°çŸ¥è¯†åº“

**è¯·æ±‚**:
```javascript
const formData = new FormData();
formData.append('file', fileBlob, 'document.pdf');

fetch('/api/upload', {
  method: 'POST',
  body: formData
});
```

**å“åº”**:
```json
{
  "file_id": "uuid",
  "filename": "document.pdf",
  "file_type": "pdf",
  "file_size": 1024000,
  "uploaded_at": "2025-11-17T10:00:00",
  "processed": false,
  "message": "æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼Œæ­£åœ¨åå°å¤„ç†..."
}
```

#### 3.2 åˆ—å‡ºæ–‡ä»¶

**ç«¯ç‚¹**: `GET /api/files`

**æŸ¥è¯¢å‚æ•°**:
- `file_type`: æŒ‰ç±»å‹ç­›é€‰ï¼ˆpdf/image/code/textï¼‰
- `processed`: æ˜¯å¦å·²å¤„ç†ï¼ˆtrue/falseï¼‰
- `limit`: è¿”å›æ•°é‡ï¼ˆé»˜è®¤50ï¼‰

**å“åº”**:
```json
{
  "files": [
    {
      "file_id": "uuid",
      "filename": "document.pdf",
      "file_type": "pdf",
      "file_size": 1024000,
      "uploaded_at": "2025-11-17T10:00:00",
      "processed": true,
      "chunk_count": 25
    }
  ],
  "total": 100,
  "page": 1
}
```

#### 3.3 åˆ é™¤æ–‡ä»¶

**ç«¯ç‚¹**: `DELETE /api/files/{file_id}`

**å“åº”**:
```json
{
  "message": "æ–‡ä»¶åˆ é™¤æˆåŠŸ",
  "file_id": "uuid"
}
```

---

### 4. å¤šæ¨¡æ€è§†è§‰æ¥å£ï¼ˆNEWï¼‰

#### 4.1 å›¾ç‰‡+æ–‡æœ¬æŸ¥è¯¢

**ç«¯ç‚¹**: `POST /api/multimodal/query`

**åŠŸèƒ½**: å‘é€å›¾ç‰‡å’Œæ–‡æœ¬ï¼Œä½¿ç”¨è±†åŒ…è§†è§‰æ¨¡å‹ç†è§£å›¾ç‰‡å†…å®¹

**è¯·æ±‚**:
```javascript
const formData = new FormData();
formData.append('query', 'è¿™å¼ å›¾ç‰‡é‡Œæœ‰ä»€ä¹ˆï¼Ÿ');
formData.append('images', imageFile1);  // å¯æ·»åŠ å¤šå¼ å›¾ç‰‡
formData.append('images', imageFile2);
formData.append('session_id', 'optional-session-id');  // å¯é€‰ï¼šæ”¯æŒä¼šè¯å†å²

const response = await fetch('/api/multimodal/query', {
  method: 'POST',
  body: formData
});
```

**å“åº”**:
```json
{
  "answer": "è¿™å¼ å›¾ç‰‡æ˜¾ç¤ºçš„æ˜¯é¦™æ¸¯ç§‘æŠ€å¤§å­¦çš„æ ¡å›­æ™¯è§‚...",
  "model_used": "doubao-seed-1-6-251015",
  "session_id": "uuid",
  "images_processed": 2,
  "response_time": 3.2
}
```

**ç‰¹æ€§**:
- æ”¯æŒå¤šå¼ å›¾ç‰‡åŒæ—¶åˆ†æ
- ä¼šè¯å†å²è®°å½•ï¼ˆå¯è·¨è¯·æ±‚å¼•ç”¨ä¹‹å‰çš„å›¾ç‰‡ï¼‰
- è±†åŒ…Seed-1-6æ¨¡å‹ï¼ˆå¼ºå¤§çš„è§†è§‰ç†è§£èƒ½åŠ›ï¼‰
- è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ˆç½‘ç»œæŠ—æŠ–ï¼‰

---

#### 4.2 å›¾ç‰‡OCR

**ç«¯ç‚¹**: `POST /api/multimodal/ocr`

**åŠŸèƒ½**: æå–å›¾ç‰‡ä¸­çš„æ–‡å­—

**è¯·æ±‚**:
```javascript
const formData = new FormData();
formData.append('image', imageFile);
formData.append('enhance', 'true');  // å¯é€‰ï¼šå›¾åƒå¢å¼º

const response = await fetch('/api/multimodal/ocr', {
  method: 'POST',
  body: formData
});
```

**å“åº”**:
```json
{
  "text": "æå–çš„æ–‡æœ¬å†…å®¹...",
  "confidence": 0.96,
  "model_used": "doubao-seed-1-6-lite-251015",
  "enhanced": true
}
```

**ç‰¹æ€§**:
- ä¸­è‹±æ–‡æ··åˆè¯†åˆ«
- è‡ªåŠ¨å›¾åƒå¢å¼ºï¼ˆé”åŒ–ã€å¯¹æ¯”åº¦è°ƒæ•´ï¼‰
- é«˜å‡†ç¡®ç‡ï¼ˆ>95%ï¼‰
- è½»é‡æ¨¡å‹ï¼ˆå¿«é€Ÿå“åº”ï¼‰

---

#### 4.3 ä¼šè¯å›¾ç‰‡å†å²

**ç«¯ç‚¹**: `GET /api/multimodal/session/{session_id}/images`

**åŠŸèƒ½**: è·å–æŸä¸ªä¼šè¯çš„æ‰€æœ‰å›¾ç‰‡å†å²

**å“åº”**:
```json
{
  "session_id": "uuid",
  "images": [
    {
      "image_id": "img1",
      "filename": "image1.jpg",
      "uploaded_at": "2025-11-22T10:00:00",
      "size": 1024000
    }
  ],
  "total": 5
}
```

---

#### 4.4 ä¼šè¯ç»Ÿè®¡

**ç«¯ç‚¹**: `GET /api/multimodal/session/{session_id}/stats`

**åŠŸèƒ½**: è·å–ä¼šè¯ç»Ÿè®¡ä¿¡æ¯

**å“åº”**:
```json
{
  "session_id": "uuid",
  "image_count": 5,
  "created_at": "2025-11-22T10:00:00",
  "last_activity": "2025-11-22T10:30:00"
}
```

---

### 5. ç³»ç»Ÿä¿¡æ¯æ¥å£

#### 5.1 å¥åº·æ£€æŸ¥

**ç«¯ç‚¹**: `GET /health`

**å“åº”**:
```json
{
  "status": "healthy",
  "services": {
    "milvus": "connected",
    "llm": "available",
    "speech": "available"
  },
  "version": "1.0.0"
}
```

#### 5.2 æ”¯æŒçš„æ¨¡å‹

**ç«¯ç‚¹**: `GET /api/models`

**å“åº”**:
```json
{
  "default_provider": "hkgai",
  "providers": ["hkgai", "gemini"],
  "hkgai_models": ["HKGAI-V1"],
  "gemini_models": [
    "gemini-2.0-flash",
    "gemini-2.5-flash",
    "gemini-2.5-pro"
  ]
}
```

#### 5.3 ç”¨é‡ç»Ÿè®¡

**ç«¯ç‚¹**: `GET /api/usage/stats`

**å“åº”**:
```json
{
  "date": "2025-11-17",
  "total_requests": 150,
  "total_tokens": 50000,
  "by_model": {
    "HKGAI-V1": {
      "requests": 100,
      "tokens": 30000
    },
    "gemini-2.0-flash": {
      "requests": 50,
      "tokens": 20000
    }
  }
}
```

---

## ğŸ“¦ æ•°æ®æ ¼å¼å®šä¹‰

### æŸ¥è¯¢å¯¹è±¡

```typescript
interface Query {
  query: string;                    // å¿…éœ€ï¼šç”¨æˆ·é—®é¢˜
  provider?: 'hkgai' | 'gemini';    // å¯é€‰ï¼šLLMæä¾›å•†
  model?: string;                   // å¯é€‰ï¼šæ¨¡å‹åç§°
  conversation_id?: string;         // å¯é€‰ï¼šå¯¹è¯ID
  file_ids?: string[];              // å¯é€‰ï¼šæŒ‡å®šæ–‡ä»¶
  top_k?: number;                   // å¯é€‰ï¼šæ£€ç´¢æ•°é‡
}
```

### å“åº”å¯¹è±¡

```typescript
interface Response {
  answer: string;                   // ç­”æ¡ˆæ–‡æœ¬
  tools_used: string[];             // ä½¿ç”¨çš„å·¥å…·
  contexts_count: number;           // ä¸Šä¸‹æ–‡æ•°é‡
  has_context: boolean;             // æ˜¯å¦ä½¿ç”¨çŸ¥è¯†åº“
  model: string;                    // ä½¿ç”¨çš„æ¨¡å‹
  tokens?: TokenUsage;              // Tokenä½¿ç”¨æƒ…å†µ
  workflow_engine?: string;         // å·¥ä½œæµå¼•æ“
  workflow_type?: string;           // å·¥ä½œæµç±»å‹
  workflow_confidence?: number;     // ç½®ä¿¡åº¦
  response_time: number;            // å“åº”æ—¶é—´
}

interface TokenUsage {
  input: number;
  output: number;
  total: number;
}
```

### è¯­éŸ³å¯¹è±¡

```typescript
interface VoiceTranscription {
  text: string;                     // è½¬å½•æ–‡æœ¬
  language: 'zh' | 'yue' | 'en';    // è¯†åˆ«è¯­è¨€
  confidence: number;               // ç½®ä¿¡åº¦ 0-1
}

interface VoiceResponse {
  transcription: VoiceTranscription;
  answer: string;                   // æ–‡æœ¬ç­”æ¡ˆ
  tools_used: string[];
  audio_response?: string;          // Base64éŸ³é¢‘
}
```

### æ–‡ä»¶å¯¹è±¡

```typescript
interface FileInfo {
  file_id: string;
  filename: string;
  file_type: 'pdf' | 'image' | 'code' | 'text';
  file_size: number;                // å­—èŠ‚
  uploaded_at: string;              // ISO 8601
  processed: boolean;
  chunk_count?: number;
}
```

### å¤šæ¨¡æ€å¯¹è±¡ï¼ˆNEWï¼‰

```typescript
interface MultimodalQueryRequest {
  query: string;                    // å¿…éœ€ï¼šæ–‡æœ¬é—®é¢˜
  images: File[];                   // å¿…éœ€ï¼šå›¾ç‰‡æ–‡ä»¶æ•°ç»„
  session_id?: string;              // å¯é€‰ï¼šä¼šè¯IDï¼ˆæ”¯æŒå†å²ï¼‰
  model?: string;                   // å¯é€‰ï¼šæŒ‡å®šæ¨¡å‹
}

interface MultimodalQueryResponse {
  answer: string;                   // AIå›ç­”
  model_used: string;               // ä½¿ç”¨çš„æ¨¡å‹
  session_id: string;               // ä¼šè¯ID
  images_processed: number;         // å¤„ç†çš„å›¾ç‰‡æ•°é‡
  response_time: number;            // å“åº”æ—¶é—´ï¼ˆç§’ï¼‰
}

interface OCRRequest {
  image: File;                      // å¿…éœ€ï¼šå›¾ç‰‡æ–‡ä»¶
  enhance?: boolean;                // å¯é€‰ï¼šå›¾åƒå¢å¼ºï¼ˆé»˜è®¤falseï¼‰
  model?: string;                   // å¯é€‰ï¼šæŒ‡å®šæ¨¡å‹
}

interface OCRResponse {
  text: string;                     // è¯†åˆ«çš„æ–‡æœ¬
  confidence: number;               // ç½®ä¿¡åº¦ 0-1
  model_used: string;               // ä½¿ç”¨çš„æ¨¡å‹
  enhanced: boolean;                // æ˜¯å¦è¿›è¡Œäº†å¢å¼º
}

interface SessionImageInfo {
  image_id: string;
  filename: string;
  uploaded_at: string;              // ISO 8601
  size: number;                     // å­—èŠ‚
}

interface SessionStats {
  session_id: string;
  image_count: number;
  created_at: string;               // ISO 8601
  last_activity: string;            // ISO 8601
}
```

---

## ğŸ¨ UI/UXè®¾è®¡æŒ‡å—

### ä¸»ç•Œé¢è®¾è®¡

#### å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ¤– MiniMango                    â”‚ â”‚
â”‚  â”‚  ä½ çš„æ™ºèƒ½åŠ©æ‰‹                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚  Chat Container                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  [å¯¹è¯æ°”æ³¡åŒºåŸŸ]                   â”‚ â”‚
â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ ç”¨æˆ·ï¼šé¦™æ¸¯ä»Šå¤©å¤©æ°”ï¼Ÿ        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ åŠ©æ‰‹ï¼šé¦™æ¸¯ä»Šå¤©å¤šäº‘ï¼Œ25Â°C... â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ ğŸŒ¤ï¸ æ¸©åº¦ï¼š25Â°C               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ’¨ é£é€Ÿï¼š19km/h             â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚  Input Area                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ ğŸ–¼ï¸ [æ–‡æœ¬è¾“å…¥æ¡†]   ğŸ¤  â¡ï¸    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¾“å…¥åŒºåŸŸæŒ‰é’®è¯´æ˜ï¼š**
- ğŸ“ **æ–‡æ¡£é™„ä»¶**: ä¸Šä¼ PDF/DOCXæ–‡ä»¶åˆ°çŸ¥è¯†åº“
- ğŸ–¼ï¸ **å›¾ç‰‡ä¸Šä¼ **: ä¸Šä¼ å›¾ç‰‡è¿›è¡Œè§†è§‰ç†è§£/OCR
- ğŸ¤ **è¯­éŸ³è¾“å…¥**: è¯­éŸ³è½¬æ–‡æœ¬è¾“å…¥
- â¡ï¸ **å‘é€**: å‘é€æ–‡æœ¬æ¶ˆæ¯

---

### äº¤äº’çŠ¶æ€è®¾è®¡

#### 1. ç©ºé—²çŠ¶æ€ï¼ˆIdleï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                â”‚
â”‚        ğŸ¤– MiniMango            â”‚
â”‚                                â”‚
â”‚    ä½ å¥½ï¼æˆ‘èƒ½å¸®ä½ ä»€ä¹ˆï¼Ÿ         â”‚
â”‚                                â”‚
â”‚  ğŸ’¡ è¯•è¯•è¿™äº›ï¼š                 â”‚
â”‚  â€¢ "é¦™æ¸¯ä»Šå¤©å¤©æ°”"              â”‚
â”‚  â€¢ "è‹¹æœè‚¡ä»·"                  â”‚
â”‚  â€¢ "ä¸Šä¼ å›¾ç‰‡åˆ†æå†…å®¹"          â”‚
â”‚                                â”‚
â”‚  [ğŸ“ğŸ–¼ï¸  è¾“å…¥...    ğŸ¤ â¡ï¸]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. è¾“å…¥çŠ¶æ€ï¼ˆTypingï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ ï¼šé¦™æ¸¯ä»Šå¤©å¤©æ°”|             â”‚
â”‚                                â”‚
â”‚ [ğŸ“ğŸ–¼ï¸ é¦™æ¸¯ä»Šå¤©å¤©æ°”æ€ä¹ˆæ · ğŸ¤â¡ï¸]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. è¯­éŸ³è¾“å…¥çŠ¶æ€ï¼ˆListeningï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                â”‚
â”‚        ğŸ¤ æ­£åœ¨å¬...            â”‚
â”‚                                â”‚
â”‚     â—â—â—â—â—â—â—â—â—‹â—‹                â”‚
â”‚                                â”‚
â”‚      [ç‚¹å‡»åœæ­¢å½•éŸ³]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4. å¤„ç†çŠ¶æ€ï¼ˆProcessingï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ ï¼šé¦™æ¸¯ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·         â”‚
â”‚                                â”‚
â”‚  åŠ©æ‰‹ï¼š                        â”‚
â”‚  â³ æ­£åœ¨æŸ¥è¯¢å¤©æ°”ä¿¡æ¯...        â”‚
â”‚  ğŸ” ä½¿ç”¨å·¥å…·ï¼šweather          â”‚
â”‚                                â”‚
â”‚  [åŠ¨ç”»åŠ è½½æŒ‡ç¤ºå™¨]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5. å›ç­”çŠ¶æ€ï¼ˆAnsweringï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ ï¼šé¦™æ¸¯ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·         â”‚
â”‚                                â”‚
â”‚  åŠ©æ‰‹ï¼š                        â”‚
â”‚  é¦™æ¸¯ä»Šå¤©çš„å¤©æ°”æ˜¯å¤šäº‘ï¼Œ         â”‚
â”‚  æ¸©åº¦ä¸º25Â°Cï¼Œä½“æ„Ÿ27Â°Cã€‚        â”‚
â”‚                                â”‚
â”‚  ğŸŒ¤ï¸ å¤šäº‘                       â”‚
â”‚  ğŸŒ¡ï¸ 25Â°C (ä½“æ„Ÿ 27Â°C)           â”‚
â”‚  ğŸ’§ æ¹¿åº¦ 69%                    â”‚
â”‚  ğŸ’¨ é£é€Ÿ 19km/h ä¸œåŒ—            â”‚
â”‚                                â”‚
â”‚  ğŸ“Š ä½¿ç”¨å·¥å…·ï¼šweather           â”‚
â”‚  â±ï¸ å“åº”æ—¶é—´ï¼š3.2ç§’            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 6. é”™è¯¯çŠ¶æ€ï¼ˆErrorï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ ï¼šæŸ¥è¯¢xyzè‚¡ç¥¨               â”‚
â”‚                                â”‚
â”‚  åŠ©æ‰‹ï¼š                        â”‚
â”‚  âš ï¸ æŠ±æ­‰ï¼Œæ— æ³•è¯†åˆ«è¯¥è‚¡ç¥¨ä»£ç    â”‚
â”‚                                â”‚
â”‚  ğŸ’¡ å»ºè®®ï¼š                     â”‚
â”‚  â€¢ æ£€æŸ¥è‚¡ç¥¨ä»£ç æ˜¯å¦æ­£ç¡®        â”‚
â”‚  â€¢ å°è¯•ä½¿ç”¨å…¬å¸å…¨å            â”‚
â”‚  â€¢ ä¾‹å¦‚ï¼š"è‹¹æœè‚¡ä»·"            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7. æ–‡ä»¶ä¸Šä¼ çŠ¶æ€ï¼ˆFile Uploadingï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ ï¼šğŸ“„ é¡¹ç›®æ–‡æ¡£.pdf           â”‚
â”‚      â¬†ï¸ ä¸Šä¼ ä¸­... 45%         â”‚
â”‚      â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘ 2.1MB/4.6MB â”‚
â”‚                                â”‚
â”‚  [ğŸ“ğŸ–¼ï¸   è¾“å…¥...    ğŸ¤ â¡ï¸]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 8. å›¾ç‰‡é¢„è§ˆçŠ¶æ€ï¼ˆImage Previewï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ ï¼š                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [å›¾ç‰‡ç¼©ç•¥å›¾] hkust.png   â”‚ â”‚
â”‚  â”‚  800x600  â”‚  125KB   [Ã—] â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚  è¿™å¼ å›¾ç‰‡æ˜¯ä»€ä¹ˆåœ°æ–¹ï¼Ÿ          â”‚
â”‚                                â”‚
â”‚  [ğŸ“ğŸ–¼ï¸   æè¿°å›¾ç‰‡   ğŸ¤ â¡ï¸]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 9. æ‹–æ‹½ä¸Šä¼ çŠ¶æ€ï¼ˆDrag & Dropï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚     ğŸ“¤                   â”‚ â”‚
â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚  æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œä¸Šä¼        â”‚ â”‚
â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚  æ”¯æŒ: PDF, DOCX, PNG,   â”‚ â”‚
â”‚  â”‚       JPG (æœ€å¤§50MB)     â”‚ â”‚
â”‚  â”‚                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 10. å¤šå›¾ç‰‡é€‰æ‹©çŠ¶æ€ï¼ˆMultiple Imagesï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ ï¼šå·²é€‰æ‹© 3 å¼ å›¾ç‰‡           â”‚
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”           â”‚
â”‚  â”‚ğŸ–¼ï¸â”‚ â”‚ğŸ–¼ï¸â”‚ â”‚ğŸ–¼ï¸â”‚ [+ æ·»åŠ ] â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜           â”‚
â”‚                                â”‚
â”‚  æ¯”è¾ƒè¿™ä¸‰å¼ å›¾ç‰‡çš„åŒºåˆ«          â”‚
â”‚                                â”‚
â”‚  [ğŸ“ğŸ–¼ï¸   è¾“å…¥...    ğŸ¤ â¡ï¸]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### æ¶ˆæ¯æ°”æ³¡è®¾è®¡

#### ç”¨æˆ·æ¶ˆæ¯

```css
.user-message {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 18px 18px 4px 18px;
  padding: 12px 16px;
  max-width: 70%;
  margin-left: auto;
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
}
```

#### åŠ©æ‰‹æ¶ˆæ¯

```css
.assistant-message {
  background: #f7f9fc;
  color: #2d3748;
  border-radius: 18px 18px 18px 4px;
  padding: 12px 16px;
  max-width: 75%;
  margin-right: auto;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}
```

#### ç³»ç»Ÿæ¶ˆæ¯ï¼ˆå·¥å…·è°ƒç”¨ã€çŠ¶æ€ï¼‰

```css
.system-message {
  background: #edf2f7;
  color: #718096;
  border-radius: 12px;
  padding: 8px 12px;
  font-size: 14px;
  text-align: center;
  margin: 8px auto;
}
```

---

### ç‰¹æ®Šå†…å®¹å¡ç‰‡è®¾è®¡

#### å¤©æ°”å¡ç‰‡

```html
<div class="weather-card">
  <div class="weather-icon">ğŸŒ¤ï¸</div>
  <div class="weather-main">
    <h3>é¦™æ¸¯</h3>
    <div class="temperature">25Â°C</div>
    <div class="condition">å¤šäº‘</div>
  </div>
  <div class="weather-details">
    <div class="detail-item">
      <span class="icon">ğŸŒ¡ï¸</span>
      <span>ä½“æ„Ÿ 27Â°C</span>
    </div>
    <div class="detail-item">
      <span class="icon">ğŸ’§</span>
      <span>æ¹¿åº¦ 69%</span>
    </div>
    <div class="detail-item">
      <span class="icon">ğŸ’¨</span>
      <span>é£é€Ÿ 19km/h</span>
    </div>
  </div>
</div>
```

#### è‚¡ç¥¨å¡ç‰‡

```html
<div class="stock-card">
  <div class="stock-header">
    <h3>è‹¹æœå…¬å¸ (AAPL)</h3>
    <span class="stock-exchange">NASDAQ</span>
  </div>
  <div class="stock-price">
    <span class="price">$272.41</span>
    <span class="change positive">+$3.25 (+1.21%)</span>
  </div>
  <div class="stock-chart">
    [è¿·ä½ èµ°åŠ¿å›¾]
  </div>
  <div class="stock-time">
    æ›´æ–°æ—¶é—´ï¼š2025-11-17 16:00 EST
  </div>
</div>
```

#### çŸ¥è¯†å¡ç‰‡

```html
<div class="knowledge-card">
  <div class="card-header">
    <span class="icon">ğŸ“š</span>
    <h4>å¦‚ä½•ä½¿ç”¨ç²¤è¯­è¾“å…¥</h4>
  </div>
  <div class="card-content">
    <p>ç³»ç»Ÿæ”¯æŒç²¤è¯­STTï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š</p>
    <ul>
      <li>Whisperæ¨¡å‹ï¼šæ”¯æŒå¤šè¯­è¨€è¯†åˆ«</li>
      <li>ä¸“ç”¨ç²¤è¯­Speech APIï¼šæä¾›æ›´é«˜å‡†ç¡®åº¦</li>
      <li>è‡ªåŠ¨è¯­è¨€æ£€æµ‹ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä½³å¼•æ“</li>
    </ul>
  </div>
  <div class="card-footer">
    <span class="source">æ¥æºï¼šç³»ç»ŸçŸ¥è¯†åº“</span>
  </div>
</div>
```

---

### åŠ¨ç”»æ•ˆæœ

#### 1. æ¶ˆæ¯è¿›å…¥åŠ¨ç”»

```css
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message {
  animation: slideIn 0.3s ease-out;
}
```

#### 2. æ‰“å­—æ•ˆæœï¼ˆæµå¼è¾“å‡ºï¼‰

```javascript
function typeWriter(text, element, speed = 30) {
  let i = 0;
  element.textContent = '';
  
  const timer = setInterval(() => {
    if (i < text.length) {
      element.textContent += text.charAt(i);
      i++;
    } else {
      clearInterval(timer);
    }
  }, speed);
}
```

#### 3. è¯­éŸ³æ³¢å½¢åŠ¨ç”»

```css
@keyframes pulse {
  0%, 100% { transform: scaleY(1); }
  50% { transform: scaleY(1.5); }
}

.voice-bar {
  width: 4px;
  height: 20px;
  background: #667eea;
  animation: pulse 0.8s ease-in-out infinite;
}

.voice-bar:nth-child(2) { animation-delay: 0.1s; }
.voice-bar:nth-child(3) { animation-delay: 0.2s; }
```

#### 4. åŠ è½½åŠ¨ç”»

```css
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-spinner {
  border: 3px solid #f3f3f3;
  border-top: 3px solid #667eea;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  animation: spin 1s linear infinite;
}
```

---

### è¾“å…¥åŒºåŸŸè¯¦ç»†è®¾è®¡

#### å®Œæ•´è¾“å…¥åŒºåŸŸå¸ƒå±€

```html
<div class="input-container">
  <!-- é™„ä»¶é¢„è§ˆåŒºåŸŸ -->
  <div class="attachments-preview" id="attachmentsPreview">
    <!-- åŠ¨æ€æ·»åŠ çš„é™„ä»¶é¢„è§ˆ -->
  </div>
  
  <!-- è¾“å…¥æ¡† -->
  <div class="input-box">
    <!-- å·¦ä¾§æŒ‰é’®ç»„ -->
    <div class="input-actions-left">
      <button class="icon-btn" id="attachFileBtn" title="ä¸Šä¼ æ–‡æ¡£ (PDF/DOCX)">
        ğŸ“
      </button>
      <button class="icon-btn" id="attachImageBtn" title="ä¸Šä¼ å›¾ç‰‡">
        ğŸ–¼ï¸
      </button>
    </div>
    
    <!-- æ–‡æœ¬è¾“å…¥ -->
    <input 
      type="text" 
      id="messageInput" 
      placeholder="è¾“å…¥æ¶ˆæ¯..."
      class="text-input"
    />
    
    <!-- å³ä¾§æŒ‰é’®ç»„ -->
    <div class="input-actions-right">
      <button class="icon-btn" id="voiceBtn" title="è¯­éŸ³è¾“å…¥">
        ğŸ¤
      </button>
      <button class="icon-btn primary" id="sendBtn" title="å‘é€">
        â¡ï¸
      </button>
    </div>
  </div>
</div>

<!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->
<input type="file" id="fileInput" accept=".pdf,.docx,.doc" multiple hidden />
<input type="file" id="imageInput" accept="image/*" multiple hidden />
```

#### CSSæ ·å¼

```css
.input-container {
  position: sticky;
  bottom: 0;
  background: white;
  padding: 16px;
  border-top: 1px solid #e5e7eb;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
}

.attachments-preview {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
  flex-wrap: wrap;
  max-height: 150px;
  overflow-y: auto;
}

.attachment-item {
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #f3f4f6;
  border-radius: 8px;
  font-size: 14px;
}

.attachment-item .remove-btn {
  position: absolute;
  top: -6px;
  right: -6px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #ef4444;
  color: white;
  border: 2px solid white;
  cursor: pointer;
  font-size: 12px;
  line-height: 1;
}

.input-box {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #f9fafb;
  border-radius: 24px;
  padding: 8px 12px;
  transition: all 0.2s;
}

.input-box:focus-within {
  background: white;
  box-shadow: 0 0 0 2px #667eea;
}

.input-actions-left,
.input-actions-right {
  display: flex;
  gap: 4px;
}

.icon-btn {
  width: 36px;
  height: 36px;
  border: none;
  background: transparent;
  border-radius: 50%;
  cursor: pointer;
  font-size: 20px;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.icon-btn:hover {
  background: rgba(102, 126, 234, 0.1);
  transform: scale(1.1);
}

.icon-btn.primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.icon-btn.primary:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.icon-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

.text-input {
  flex: 1;
  border: none;
  background: transparent;
  outline: none;
  font-size: 16px;
  padding: 8px;
  color: #1f2937;
}

.text-input::placeholder {
  color: #9ca3af;
}
```

#### JavaScriptå®ç°

```javascript
// æ–‡ä»¶ä¸Šä¼ ç®¡ç†å™¨
class FileUploadManager {
  constructor() {
    this.attachments = [];
    this.initEventListeners();
  }
  
  initEventListeners() {
    // æ–‡æ¡£ä¸Šä¼ æŒ‰é’®
    document.getElementById('attachFileBtn').addEventListener('click', () => {
      document.getElementById('fileInput').click();
    });
    
    // å›¾ç‰‡ä¸Šä¼ æŒ‰é’®
    document.getElementById('attachImageBtn').addEventListener('click', () => {
      document.getElementById('imageInput').click();
    });
    
    // æ–‡ä»¶é€‰æ‹©
    document.getElementById('fileInput').addEventListener('change', (e) => {
      this.handleFiles(e.target.files, 'document');
    });
    
    document.getElementById('imageInput').addEventListener('change', (e) => {
      this.handleFiles(e.target.files, 'image');
    });
    
    // æ‹–æ‹½ä¸Šä¼ 
    const inputContainer = document.querySelector('.input-container');
    
    inputContainer.addEventListener('dragover', (e) => {
      e.preventDefault();
      inputContainer.classList.add('drag-over');
    });
    
    inputContainer.addEventListener('dragleave', () => {
      inputContainer.classList.remove('drag-over');
    });
    
    inputContainer.addEventListener('drop', (e) => {
      e.preventDefault();
      inputContainer.classList.remove('drag-over');
      this.handleFiles(e.dataTransfer.files, 'auto');
    });
  }
  
  handleFiles(files, type) {
    for (let file of files) {
      // éªŒè¯æ–‡ä»¶
      if (!this.validateFile(file, type)) {
        continue;
      }
      
      // æ·»åŠ åˆ°é™„ä»¶åˆ—è¡¨
      const attachment = {
        id: Date.now() + Math.random(),
        file: file,
        type: this.getFileType(file),
        name: file.name,
        size: file.size,
        preview: null
      };
      
      // å¦‚æœæ˜¯å›¾ç‰‡ï¼Œç”Ÿæˆé¢„è§ˆ
      if (attachment.type === 'image') {
        this.generateImagePreview(file, attachment);
      }
      
      this.attachments.push(attachment);
      this.renderAttachment(attachment);
    }
  }
  
  validateFile(file, type) {
    const maxSize = 50 * 1024 * 1024; // 50MB
    
    if (file.size > maxSize) {
      alert(`æ–‡ä»¶ "${file.name}" è¶…è¿‡50MBé™åˆ¶`);
      return false;
    }
    
    const allowedTypes = {
      document: ['.pdf', '.docx', '.doc'],
      image: ['.jpg', '.jpeg', '.png', '.gif', '.webp'],
      auto: ['.pdf', '.docx', '.doc', '.jpg', '.jpeg', '.png', '.gif', '.webp']
    };
    
    const fileName = file.name.toLowerCase();
    const allowed = allowedTypes[type] || allowedTypes.auto;
    
    if (!allowed.some(ext => fileName.endsWith(ext))) {
      alert(`ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹: ${file.name}`);
      return false;
    }
    
    return true;
  }
  
  getFileType(file) {
    if (file.type.startsWith('image/')) {
      return 'image';
    } else if (file.type.includes('pdf')) {
      return 'pdf';
    } else {
      return 'document';
    }
  }
  
  generateImagePreview(file, attachment) {
    const reader = new FileReader();
    reader.onload = (e) => {
      attachment.preview = e.target.result;
      this.updateAttachmentPreview(attachment);
    };
    reader.readAsDataURL(file);
  }
  
  renderAttachment(attachment) {
    const preview = document.getElementById('attachmentsPreview');
    
    const item = document.createElement('div');
    item.className = 'attachment-item';
    item.dataset.id = attachment.id;
    
    const icon = this.getFileIcon(attachment.type);
    const sizeStr = this.formatFileSize(attachment.size);
    
    item.innerHTML = `
      <span class="file-icon">${icon}</span>
      <span class="file-name">${attachment.name}</span>
      <span class="file-size">${sizeStr}</span>
      <button class="remove-btn" onclick="fileManager.removeAttachment('${attachment.id}')">
        Ã—
      </button>
    `;
    
    if (attachment.preview) {
      item.style.backgroundImage = `url(${attachment.preview})`;
      item.classList.add('image-preview');
    }
    
    preview.appendChild(item);
  }
  
  updateAttachmentPreview(attachment) {
    const item = document.querySelector(`[data-id="${attachment.id}"]`);
    if (item && attachment.preview) {
      item.style.backgroundImage = `url(${attachment.preview})`;
      item.classList.add('image-preview');
    }
  }
  
  removeAttachment(id) {
    this.attachments = this.attachments.filter(a => a.id != id);
    const item = document.querySelector(`[data-id="${id}"]`);
    if (item) {
      item.remove();
    }
  }
  
  getFileIcon(type) {
    const icons = {
      image: 'ğŸ–¼ï¸',
      pdf: 'ğŸ“„',
      document: 'ğŸ“'
    };
    return icons[type] || 'ğŸ“';
  }
  
  formatFileSize(bytes) {
    if (bytes < 1024) return bytes + ' B';
    else if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
    else return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
  }
  
  async uploadAll() {
    const uploads = [];
    
    for (let attachment of this.attachments) {
      if (attachment.type === 'image') {
        // å›¾ç‰‡ç”¨multimodal API
        uploads.push(this.uploadImage(attachment));
      } else {
        // æ–‡æ¡£ç”¨upload API
        uploads.push(this.uploadDocument(attachment));
      }
    }
    
    return await Promise.all(uploads);
  }
  
  async uploadDocument(attachment) {
    const formData = new FormData();
    formData.append('file', attachment.file);
    
    const response = await fetch('/api/upload', {
      method: 'POST',
      body: formData
    });
    
    return await response.json();
  }
  
  async uploadImage(attachment) {
    // å›¾ç‰‡æš‚å­˜ï¼ŒéšæŸ¥è¯¢ä¸€èµ·å‘é€
    return {
      id: attachment.id,
      file: attachment.file,
      preview: attachment.preview
    };
  }
  
  clear() {
    this.attachments = [];
    document.getElementById('attachmentsPreview').innerHTML = '';
  }
}

// åˆå§‹åŒ–
const fileManager = new FileUploadManager();
```

#### æ‹–æ‹½ä¸Šä¼ æ ·å¼

```css
.input-container.drag-over {
  background: rgba(102, 126, 234, 0.05);
  border: 2px dashed #667eea;
  border-radius: 12px;
}

.input-container.drag-over::before {
  content: 'ğŸ“¤ æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œä¸Šä¼ ';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 18px;
  color: #667eea;
  font-weight: 500;
  pointer-events: none;
}

.attachment-item.image-preview {
  width: 80px;
  height: 80px;
  background-size: cover;
  background-position: center;
  border-radius: 8px;
  position: relative;
}

.attachment-item.image-preview .file-name,
.attachment-item.image-preview .file-icon {
  display: none;
}

.attachment-item.uploading {
  opacity: 0.6;
}

.attachment-item .progress-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: #e5e7eb;
  border-radius: 0 0 8px 8px;
  overflow: hidden;
}

.attachment-item .progress-bar::after {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  width: var(--progress, 0%);
  transition: width 0.3s;
}
```

---

## ğŸ”„ äº¤äº’æµç¨‹å›¾

### æ–‡æœ¬æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·è¾“å…¥æ–‡æœ¬
    â†“
å‰ç«¯å‘é€POST /api/agent_query
    â†“
æ˜¾ç¤º"å¤„ç†ä¸­"çŠ¶æ€
    â†“
åç«¯å¤„ç†
    â”œâ†’ å·¥å…·é€‰æ‹©ï¼ˆè‡ªåŠ¨ï¼‰
    â”œâ†’ æ•°æ®æ£€ç´¢
    â””â†’ ç”Ÿæˆç­”æ¡ˆ
    â†“
æ¥æ”¶å“åº”
    â†“
è§£ætools_used
    â”œâ†’ weather â†’ æ˜¾ç¤ºå¤©æ°”å¡ç‰‡
    â”œâ†’ finance â†’ æ˜¾ç¤ºè‚¡ç¥¨å¡ç‰‡
    â”œâ†’ local_rag â†’ æ˜¾ç¤ºçŸ¥è¯†å¡ç‰‡
    â””â†’ å…¶ä»– â†’ æ˜¾ç¤ºæ–‡æœ¬ç­”æ¡ˆ
    â†“
æ˜¾ç¤ºç­”æ¡ˆï¼ˆå¸¦åŠ¨ç”»ï¼‰
    â†“
æ˜¾ç¤ºå…ƒä¿¡æ¯ï¼ˆå·¥å…·ã€æ—¶é—´ï¼‰
```

### è¯­éŸ³æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»è¯­éŸ³æŒ‰é’®
    â†“
è¯·æ±‚éº¦å…‹é£æƒé™
    â†“
å»ºç«‹WebSocketè¿æ¥
    â†“
æ˜¾ç¤º"æ­£åœ¨å¬..."çŠ¶æ€
    â†“
å¼€å§‹å½•éŸ³
    â”œâ†’ æ•è·éŸ³é¢‘æµ
    â”œâ†’ å®æ—¶å‘é€åˆ°æœåŠ¡å™¨
    â””â†’ æ˜¾ç¤ºéŸ³æ³¢åŠ¨ç”»
    â†“
ç”¨æˆ·åœæ­¢å½•éŸ³ æˆ– æ£€æµ‹åˆ°é™éŸ³
    â†“
æ˜¾ç¤º"å¤„ç†ä¸­"çŠ¶æ€
    â†“
æ¥æ”¶è½¬å½•ç»“æœ
    â†“
æ˜¾ç¤ºè½¬å½•æ–‡æœ¬
    â†“
æ¥æ”¶ç­”æ¡ˆ
    â†“
æ˜¾ç¤ºæ–‡æœ¬ç­”æ¡ˆ
    â†“
æ¥æ”¶éŸ³é¢‘å›å¤
    â†“
æ’­æ”¾TTSéŸ³é¢‘
    â†“
å®Œæˆ
```

### æ–‡ä»¶ä¸Šä¼ æµç¨‹

```
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶
    â†“
å‰ç«¯éªŒè¯
    â”œâ†’ æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆ<50MBï¼‰
    â”œâ†’ æ£€æŸ¥æ–‡ä»¶ç±»å‹
    â””â†’ é¢„è§ˆç¼©ç•¥å›¾
    â†“
æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡
    â†“
POST /api/upload
    â†“
æ¥æ”¶file_id
    â†“
æ˜¾ç¤º"å¤„ç†ä¸­"æç¤º
    â†“
è½®è¯¢æ–‡ä»¶çŠ¶æ€
GET /api/files/{file_id}
    â†“
processed = true
    â†“
æ˜¾ç¤º"ä¸Šä¼ æˆåŠŸ"
    â†“
æ›´æ–°æ–‡ä»¶åˆ—è¡¨
```

### å›¾ç‰‡ä¸Šä¼ ä¸æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·é€‰æ‹©/æ‹–æ‹½å›¾ç‰‡
    â†“
å‰ç«¯éªŒè¯
    â”œâ†’ æ£€æŸ¥æ–‡ä»¶æ ¼å¼ï¼ˆjpg/png/gif/webpï¼‰
    â”œâ†’ æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆ<10MBï¼‰
    â””â†’ ç”Ÿæˆç¼©ç•¥å›¾é¢„è§ˆ
    â†“
æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆ
ç”¨æˆ·è¾“å…¥é—®é¢˜æ–‡æœ¬
    â†“
ç”¨æˆ·ç‚¹å‡»å‘é€
    â†“
æ„å»ºFormData
    â”œâ†’ query: é—®é¢˜æ–‡æœ¬
    â”œâ†’ images: å›¾ç‰‡æ–‡ä»¶æ•°ç»„
    â””â†’ session_id: ä¼šè¯IDï¼ˆå¯é€‰ï¼‰
    â†“
POST /api/multimodal/query
    â†“
æ˜¾ç¤º"AIåˆ†æä¸­"çŠ¶æ€
    â†“
æ¥æ”¶å›ç­”
    â†“
æ˜¾ç¤ºå›ç­”ï¼ˆå¸¦å›¾ç‰‡å¼•ç”¨ï¼‰
    â†“
æ¸…ç©ºå›¾ç‰‡é¢„è§ˆåŒºåŸŸ
```

### å®Œæ•´å‘é€æ¶ˆæ¯æµç¨‹ï¼ˆå«é™„ä»¶ï¼‰

```
ç”¨æˆ·è¾“å…¥/ä¸Šä¼ 
    â”œâ†’ æœ‰å›¾ç‰‡ï¼Ÿ
    â”‚   â”œâ†’ Yes: ä½¿ç”¨ /api/multimodal/query
    â”‚   â””â†’ No: æ£€æŸ¥æ–‡æ¡£
    â”‚       â”œâ†’ æœ‰æ–‡æ¡£ï¼Ÿ
    â”‚       â”‚   â”œâ†’ Yes: å…ˆä¸Šä¼ æ–‡æ¡£åˆ°çŸ¥è¯†åº“
    â”‚       â”‚   â”‚       â†“
    â”‚       â”‚   â”‚   POST /api/upload
    â”‚       â”‚   â”‚       â†“
    â”‚       â”‚   â”‚   è·å–file_id
    â”‚       â”‚   â”‚       â†“
    â”‚       â”‚   â””â†’ ç”¨file_idæŸ¥è¯¢çŸ¥è¯†åº“
    â”‚       â””â†’ No: ç›´æ¥æ–‡æœ¬æŸ¥è¯¢
    â”‚
    â†“
å‘é€æŸ¥è¯¢è¯·æ±‚
    â”œâ†’ å›¾ç‰‡æŸ¥è¯¢: POST /api/multimodal/query
    â”œâ†’ æ–‡æ¡£æŸ¥è¯¢: POST /api/agent_query (with file_ids)
    â””â†’ æ–‡æœ¬æŸ¥è¯¢: POST /api/agent_query
    â†“
æ˜¾ç¤ºå›ç­”
```

---

## âš ï¸ é”™è¯¯å¤„ç†

### é”™è¯¯ç±»å‹å’Œå¤„ç†ç­–ç•¥

#### 1. ç½‘ç»œé”™è¯¯

```javascript
try {
  const response = await fetch('/api/agent_query', options);
} catch (error) {
  if (error instanceof TypeError) {
    showError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®');
  } else {
    showError('è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
  }
}
```

**UIæ˜¾ç¤º**:
```
âš ï¸ ç½‘ç»œè¿æ¥å¤±è´¥
è¯·æ£€æŸ¥ä½ çš„ç½‘ç»œè®¾ç½®åé‡è¯•

[é‡è¯•] [å–æ¶ˆ]
```

#### 2. APIé”™è¯¯

```javascript
if (!response.ok) {
  const error = await response.json();
  
  switch (response.status) {
    case 400:
      showError('è¯·æ±‚æ ¼å¼é”™è¯¯ï¼š' + error.detail);
      break;
    case 429:
      showError('è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•');
      break;
    case 500:
      showError('æœåŠ¡å™¨é”™è¯¯ï¼Œæˆ‘ä»¬æ­£åœ¨ä¿®å¤ä¸­...');
      break;
    default:
      showError('æœªçŸ¥é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜');
  }
}
```

#### 3. è¶…æ—¶é”™è¯¯

```javascript
const controller = new AbortController();
const timeoutId = setTimeout(() => controller.abort(), 30000);

try {
  const response = await fetch('/api/agent_query', {
    signal: controller.signal,
    ...options
  });
} catch (error) {
  if (error.name === 'AbortError') {
    showError('è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•');
  }
} finally {
  clearTimeout(timeoutId);
}
```

#### 4. è¯­éŸ³ç›¸å…³é”™è¯¯

```javascript
// éº¦å…‹é£æƒé™è¢«æ‹’ç»
navigator.mediaDevices.getUserMedia({ audio: true })
  .catch(error => {
    if (error.name === 'NotAllowedError') {
      showError('éœ€è¦éº¦å…‹é£æƒé™æ‰èƒ½ä½¿ç”¨è¯­éŸ³åŠŸèƒ½');
    } else if (error.name === 'NotFoundError') {
      showError('æœªæ£€æµ‹åˆ°éº¦å…‹é£è®¾å¤‡');
    }
  });
```

#### 5. æ–‡ä»¶ä¸Šä¼ é”™è¯¯

```javascript
// æ–‡ä»¶ç±»å‹ä¸æ”¯æŒ
function validateFile(file) {
  const allowedTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
  const allowedImageTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
  
  if (!allowedTypes.includes(file.type) && !allowedImageTypes.includes(file.type)) {
    showError(`ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹: ${file.name}\næ”¯æŒ: PDF, DOCX, JPG, PNG, GIF, WEBP`);
    return false;
  }
  
  // æ–‡ä»¶å¤§å°é™åˆ¶
  const maxSize = 50 * 1024 * 1024; // 50MB
  if (file.size > maxSize) {
    showError(`æ–‡ä»¶ "${file.name}" è¶…è¿‡50MBé™åˆ¶\nå½“å‰å¤§å°: ${(file.size / 1024 / 1024).toFixed(1)}MB`);
    return false;
  }
  
  return true;
}

// ä¸Šä¼ å¤±è´¥å¤„ç†
async function uploadFile(file) {
  try {
    const formData = new FormData();
    formData.append('file', file);
    
    const response = await fetch('/api/upload', {
      method: 'POST',
      body: formData
    });
    
    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.detail || 'ä¸Šä¼ å¤±è´¥');
    }
    
    return await response.json();
  } catch (error) {
    showError(`æ–‡ä»¶ä¸Šä¼ å¤±è´¥: ${error.message}`);
    return null;
  }
}
```

**UIæ˜¾ç¤º**:
```
âš ï¸ æ–‡ä»¶ä¸Šä¼ å¤±è´¥
æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒæˆ–æ–‡ä»¶è¿‡å¤§

ğŸ’¡ æ”¯æŒçš„æ ¼å¼ï¼š
  â€¢ æ–‡æ¡£: PDF, DOCX (æœ€å¤§50MB)
  â€¢ å›¾ç‰‡: JPG, PNG, GIF, WEBP (æœ€å¤§10MB)

[é‡æ–°é€‰æ‹©] [å–æ¶ˆ]
```

#### 6. å›¾ç‰‡å¤„ç†é”™è¯¯

```javascript
// å›¾ç‰‡åŠ è½½å¤±è´¥
function handleImageError(file) {
  const img = new Image();
  img.onerror = () => {
    showError(`å›¾ç‰‡ "${file.name}" æ— æ³•åŠ è½½ï¼Œå¯èƒ½å·²æŸå`);
  };
  
  const reader = new FileReader();
  reader.onload = (e) => {
    img.src = e.target.result;
  };
  reader.onerror = () => {
    showError(`æ— æ³•è¯»å–å›¾ç‰‡æ–‡ä»¶: ${file.name}`);
  };
  reader.readAsDataURL(file);
}

// å¤šå›¾ç‰‡é™åˆ¶
function checkImageLimit(currentCount) {
  const MAX_IMAGES = 5;
  if (currentCount >= MAX_IMAGES) {
    showError(`æœ€å¤šåªèƒ½åŒæ—¶ä¸Šä¼ ${MAX_IMAGES}å¼ å›¾ç‰‡`);
    return false;
  }
  return true;
}
```

### é”™è¯¯æ¶ˆæ¯æ˜¾ç¤ºè§„èŒƒ

```typescript
interface ErrorMessage {
  type: 'error' | 'warning' | 'info';
  title: string;
  message: string;
  actions?: {
    label: string;
    handler: () => void;
  }[];
}

// ç¤ºä¾‹
const errorMsg: ErrorMessage = {
  type: 'error',
  title: 'ç½‘ç»œé”™è¯¯',
  message: 'æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®',
  actions: [
    { label: 'é‡è¯•', handler: () => retryRequest() },
    { label: 'å–æ¶ˆ', handler: () => closeError() }
  ]
};
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å‰ç«¯ä¼˜åŒ–

#### é˜²æŠ–å’ŒèŠ‚æµ

```javascript
// è¾“å…¥é˜²æŠ–ï¼ˆç”¨äºæœç´¢å»ºè®®ï¼‰
const debouncedSearch = debounce((query) => {
  fetchSuggestions(query);
}, 300);

// æ»šåŠ¨èŠ‚æµï¼ˆç”¨äºæ— é™æ»šåŠ¨ï¼‰
const throttledScroll = throttle(() => {
  loadMoreMessages();
}, 1000);
```

#### æ¶ˆæ¯è™šæ‹ŸåŒ–

```javascript
// ä»…æ¸²æŸ“å¯è§æ¶ˆæ¯ï¼Œæå‡é•¿å¯¹è¯æ€§èƒ½
import { VirtualList } from 'react-virtual';

<VirtualList
  height={600}
  itemCount={messages.length}
  itemSize={100}
  renderItem={({ index }) => <Message data={messages[index]} />}
/>
```

#### æ‡’åŠ è½½

```javascript
// æ‡’åŠ è½½å†å²æ¶ˆæ¯
const loadHistoryMessages = async () => {
  if (hasMore && !loading) {
    setLoading(true);
    const oldMessages = await fetchMessages(offset);
    setMessages(prev => [...oldMessages, ...prev]);
    setLoading(false);
  }
};
```

### 2. è¯·æ±‚ä¼˜åŒ–

#### ç¼“å­˜ç­–ç•¥

```javascript
// ç¼“å­˜å¸¸è§æŸ¥è¯¢ç»“æœ
const cache = new Map();

async function queryWithCache(query) {
  const cacheKey = query.toLowerCase();
  
  if (cache.has(cacheKey)) {
    const cached = cache.get(cacheKey);
    if (Date.now() - cached.timestamp < 3600000) { // 1å°æ—¶
      return cached.data;
    }
  }
  
  const data = await fetchQuery(query);
  cache.set(cacheKey, { data, timestamp: Date.now() });
  return data;
}
```

#### è¯·æ±‚å–æ¶ˆ

```javascript
let currentRequest = null;

async function searchQuery(query) {
  // å–æ¶ˆä¸Šä¸€ä¸ªæœªå®Œæˆçš„è¯·æ±‚
  if (currentRequest) {
    currentRequest.abort();
  }
  
  currentRequest = new AbortController();
  
  try {
    const response = await fetch('/api/agent_query', {
      signal: currentRequest.signal,
      method: 'POST',
      body: JSON.stringify({ query })
    });
    return await response.json();
  } catch (error) {
    if (error.name !== 'AbortError') {
      throw error;
    }
  }
}
```

### 3. WebSocketä¼˜åŒ–

#### å¿ƒè·³æœºåˆ¶

```javascript
const ws = new WebSocket('ws://localhost:5555/ws/voice');
let heartbeatInterval;

ws.onopen = () => {
  // æ¯30ç§’å‘é€å¿ƒè·³
  heartbeatInterval = setInterval(() => {
    ws.send(JSON.stringify({ type: 'ping' }));
  }, 30000);
};

ws.onclose = () => {
  clearInterval(heartbeatInterval);
};
```

#### è‡ªåŠ¨é‡è¿

```javascript
function connectWebSocket(maxRetries = 5) {
  let retries = 0;
  
  function connect() {
    const ws = new WebSocket('ws://localhost:5555/ws/voice');
    
    ws.onclose = () => {
      if (retries < maxRetries) {
        retries++;
        setTimeout(connect, 1000 * retries); // æŒ‡æ•°é€€é¿
      }
    };
    
    ws.onerror = () => {
      ws.close();
    };
    
    return ws;
  }
  
  return connect();
}
```

---

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹å®šä¹‰

```css
/* ç§»åŠ¨ç«¯ */
@media (max-width: 768px) {
  .chat-container {
    padding: 12px;
  }
  
  .message {
    max-width: 85%;
    font-size: 15px;
  }
  
  .input-area {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
  }
}

/* å¹³æ¿ */
@media (min-width: 769px) and (max-width: 1024px) {
  .chat-container {
    max-width: 768px;
    margin: 0 auto;
  }
}

/* æ¡Œé¢ */
@media (min-width: 1025px) {
  .chat-container {
    max-width: 1024px;
    margin: 0 auto;
  }
  
  .sidebar {
    display: block; /* æ˜¾ç¤ºä¾§è¾¹æ  */
  }
}
```

### ç§»åŠ¨ç«¯ä¼˜åŒ–

```javascript
// æ£€æµ‹ç§»åŠ¨è®¾å¤‡
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

if (isMobile) {
  // å¯ç”¨è§¦æ‘¸ä¼˜åŒ–
  enableTouchGestures();
  
  // ä¼˜åŒ–è¯­éŸ³æŒ‰é’®å¤§å°
  voiceButton.style.minHeight = '48px';
  voiceButton.style.minWidth = '48px';
  
  // é˜²æ­¢è¾“å…¥æ¡†ç¼©æ”¾
  inputField.style.fontSize = '16px';
}
```

---

## ğŸ¯ æ¨èæŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶

**é€‰é¡¹1: React + TypeScriptï¼ˆæ¨èï¼‰**
```bash
npm create vite@latest minimango-frontend -- --template react-ts
```

**é€‰é¡¹2: Vue 3 + TypeScript**
```bash
npm create vite@latest minimango-frontend -- --template vue-ts
```

### å…³é”®åº“

```json
{
  "dependencies": {
    "axios": "^1.6.0",           // HTTPè¯·æ±‚
    "socket.io-client": "^4.5.0", // WebSocket
    "react-markdown": "^9.0.0",   // Markdownæ¸²æŸ“
    "framer-motion": "^10.0.0",   // åŠ¨ç”»
    "recharts": "^2.10.0",        // å›¾è¡¨ï¼ˆè‚¡ç¥¨èµ°åŠ¿ï¼‰
    "@heroicons/react": "^2.0.0", // å›¾æ ‡
    "date-fns": "^2.30.0"         // æ—¥æœŸå¤„ç†
  }
}
```

---

## ğŸ“ å®Œæ•´ä»£ç ç¤ºä¾‹

### Reactç»„ä»¶ç¤ºä¾‹

```typescript
// ChatInterface.tsx
import { useState, useEffect, useRef } from 'react';
import axios from 'axios';

interface Message {
  id: string;
  type: 'user' | 'assistant' | 'system';
  content: string;
  timestamp: Date;
  metadata?: {
    tools_used?: string[];
    response_time?: number;
  };
}

export function ChatInterface() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [input, setInput] = useState('');
  const [loading, setLoading] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);

  const sendMessage = async () => {
    if (!input.trim()) return;

    // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    const userMessage: Message = {
      id: Date.now().toString(),
      type: 'user',
      content: input,
      timestamp: new Date()
    };
    setMessages(prev => [...prev, userMessage]);
    setInput('');
    setLoading(true);

    try {
      // è°ƒç”¨API
      const response = await axios.post('http://localhost:5555/api/agent_query', {
        query: input
      });

      // æ·»åŠ åŠ©æ‰‹å›å¤
      const assistantMessage: Message = {
        id: (Date.now() + 1).toString(),
        type: 'assistant',
        content: response.data.answer,
        timestamp: new Date(),
        metadata: {
          tools_used: response.data.tools_used,
          response_time: response.data.response_time
        }
      };
      setMessages(prev => [...prev, assistantMessage]);
    } catch (error) {
      console.error('Error:', error);
      // æ·»åŠ é”™è¯¯æ¶ˆæ¯
      const errorMessage: Message = {
        id: (Date.now() + 1).toString(),
        type: 'system',
        content: 'æŠ±æ­‰ï¼Œå‘ç”Ÿäº†é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•ã€‚',
        timestamp: new Date()
      };
      setMessages(prev => [...prev, errorMessage]);
    } finally {
      setLoading(false);
    }
  };

  // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  return (
    <div className="chat-interface">
      <div className="messages-container">
        {messages.map(msg => (
          <div key={msg.id} className={`message ${msg.type}`}>
            <div className="message-content">{msg.content}</div>
            {msg.metadata && (
              <div className="message-metadata">
                {msg.metadata.tools_used && (
                  <span>ğŸ”§ {msg.metadata.tools_used.join(', ')}</span>
                )}
                {msg.metadata.response_time && (
                  <span>â±ï¸ {msg.metadata.response_time.toFixed(2)}s</span>
                )}
              </div>
            )}
          </div>
        ))}
        {loading && (
          <div className="message assistant loading">
            <div className="loading-spinner" />
            æ­£åœ¨æ€è€ƒ...
          </div>
        )}
        <div ref={messagesEndRef} />
      </div>

      <div className="input-area">
        <input
          type="text"
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
          placeholder="è¾“å…¥ä½ çš„é—®é¢˜..."
          disabled={loading}
        />
        <button onClick={sendMessage} disabled={loading || !input.trim()}>
          å‘é€
        </button>
      </div>
    </div>
  );
}
```

---

## ğŸ¨ æ ·å¼å‚è€ƒ

```css
/* styles.css */
:root {
  --primary-color: #667eea;
  --secondary-color: #764ba2;
  --background: #ffffff;
  --surface: #f7f9fc;
  --text-primary: #2d3748;
  --text-secondary: #718096;
  --border-radius: 18px;
  --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.chat-interface {
  display: flex;
  flex-direction: column;
  height: 100vh;
  max-width: 800px;
  margin: 0 auto;
  background: var(--background);
}

.messages-container {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.message {
  padding: 12px 16px;
  border-radius: var(--border-radius);
  max-width: 70%;
  word-wrap: break-word;
  box-shadow: var(--shadow);
}

.message.user {
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: white;
  margin-left: auto;
  border-radius: 18px 18px 4px 18px;
}

.message.assistant {
  background: var(--surface);
  color: var(--text-primary);
  margin-right: auto;
  border-radius: 18px 18px 18px 4px;
}

.message.system {
  background: #edf2f7;
  color: var(--text-secondary);
  font-size: 14px;
  text-align: center;
  margin: 8px auto;
  max-width: 80%;
}

.message-metadata {
  margin-top: 8px;
  font-size: 12px;
  color: var(--text-secondary);
  display: flex;
  gap: 12px;
}

.input-area {
  display: flex;
  padding: 16px;
  background: var(--surface);
  border-top: 1px solid #e2e8f0;
  gap: 12px;
}

.input-area input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid #e2e8f0;
  border-radius: 24px;
  font-size: 16px;
  outline: none;
  transition: border-color 0.3s;
}

.input-area input:focus {
  border-color: var(--primary-color);
}

.input-area button {
  padding: 12px 24px;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: white;
  border: none;
  border-radius: 24px;
  font-size: 16px;
  cursor: pointer;
  transition: transform 0.2s;
}

.input-area button:hover {
  transform: translateY(-2px);
}

.input-area button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.loading-spinner {
  width: 20px;
  height: 20px;
  border: 3px solid #f3f3f3;
  border-top: 3px solid var(--primary-color);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  display: inline-block;
  margin-right: 8px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰å‰ç«¯é›†æˆé—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ `/docs` ä¸‹çš„æŠ€æœ¯æ–‡æ¡£
2. è®¿é—® API Swaggeræ–‡æ¡£ï¼š`http://localhost:5555/docs`
3. åˆ›å»ºGitHub Issue
4. è”ç³»é¡¹ç›®ç»´æŠ¤è€…

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0  
**æœ€åæ›´æ–°**: 2025-11-22  
**ç»´æŠ¤è€…**: Team MiniMango  
**é¡¹ç›®åœ°å€**: https://github.com/AnonymityHE/MAIE-5221-NLP-Final-Intelligent-Search-Engine

---

## ğŸ†• v2.0.0 æ›´æ–°æ—¥å¿— (2025-11-22)

### æ–°å¢åŠŸèƒ½
âœ… **å¤šæ¨¡æ€è§†è§‰ç†è§£**
- æ–°å¢è±†åŒ…Seed-1-6å¤šæ¨¡æ€æ¨¡å‹
- æ”¯æŒå›¾ç‰‡+æ–‡æœ¬æŸ¥è¯¢ï¼ˆ`/api/multimodal/query`ï¼‰
- å›¾ç‰‡OCRåŠŸèƒ½ï¼ˆ`/api/multimodal/ocr`ï¼‰
- ä¼šè¯å›¾ç‰‡å†å²è®°å½•

âœ… **å®Œæ•´è¯­éŸ³äº¤äº’**
- æ–°å¢ç‹¬ç«‹STTæ¥å£ï¼ˆ`/api/stt`ï¼‰
- åŒå¼•æ“STTï¼ˆHKGAIç²¤è¯­ + Whisperé€šç”¨ï¼‰
- Edge TTSå®Œç¾ç²¤è¯­æ”¯æŒ
- å®Œæ•´è¯­éŸ³é—­ç¯ï¼ˆè¯­éŸ³é—®é¢˜â†’Agentâ†’ç²¤è¯­å›ç­”ï¼‰

âœ… **å®Œæ•´UIäº¤äº’è®¾è®¡ï¼ˆNEWï¼‰**
- ğŸ“ **æ–‡æ¡£ä¸Šä¼ æŒ‰é’®**: æ”¯æŒPDF/DOCXæ‹–æ‹½ä¸Šä¼ 
- ğŸ–¼ï¸ **å›¾ç‰‡ä¸Šä¼ æŒ‰é’®**: æ”¯æŒå¤šå›¾ç‰‡åŒæ—¶ä¸Šä¼ 
- ğŸ¤ **è¯­éŸ³è¾“å…¥æŒ‰é’®**: ä¸€é”®è¯­éŸ³è½¬æ–‡æœ¬
- ğŸ“¤ **æ‹–æ‹½ä¸Šä¼ **: æ‹–æ‹½æ–‡ä»¶åˆ°è¾“å…¥åŒºåŸŸå¿«é€Ÿä¸Šä¼ 
- ğŸ–¼ï¸ **å›¾ç‰‡é¢„è§ˆ**: å®æ—¶ç¼©ç•¥å›¾é¢„è§ˆå’Œç¼–è¾‘
- ğŸ“Š **ä¸Šä¼ è¿›åº¦**: å®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡
- âŒ **é™„ä»¶ç®¡ç†**: å•å‡»åˆ é™¤å·²é€‰æ‹©çš„æ–‡ä»¶
- ğŸ¨ **10ç§äº¤äº’çŠ¶æ€**: ç©ºé—²ã€è¾“å…¥ã€è¯­éŸ³ã€å¤„ç†ã€å›ç­”ã€é”™è¯¯ã€ä¸Šä¼ ã€é¢„è§ˆã€æ‹–æ‹½ã€å¤šå›¾

âœ… **å®Œæ•´ä»£ç å®ç°**
- `FileUploadManager` ç±»ï¼šå®Œæ•´æ–‡ä»¶ç®¡ç†å™¨
- æ‹–æ‹½ä¸Šä¼ äº‹ä»¶å¤„ç†
- æ–‡ä»¶éªŒè¯å’Œé”™è¯¯å¤„ç†
- å›¾ç‰‡é¢„è§ˆç”Ÿæˆ
- å¤šæ–‡ä»¶ä¸Šä¼ é˜Ÿåˆ—ç®¡ç†
- å®Œæ•´CSSæ ·å¼å’ŒåŠ¨ç”»æ•ˆæœ

âœ… **æ€§èƒ½æå‡**
- STTè¯†åˆ«å‡†ç¡®ç‡ï¼š87.5%ï¼ˆ7/8æµ‹è¯•ï¼‰
- Agentå“åº”æ—¶é—´ï¼šå¹³å‡4.7ç§’
- å·¥å…·è°ƒç”¨å‡†ç¡®ç‡ï¼š90%ï¼ˆTest Set 3ï¼‰
- å¤šæ¨¡æ€å“åº”ï¼šå¹³å‡3.2ç§’

### æµ‹è¯•ç»“æœ
- âœ… 8ä¸ªè¯­éŸ³é—®é¢˜å®Œæ•´æµ‹è¯•ï¼ˆSet 1 & 2ï¼‰
- âœ… 10ä¸ªAgentå·¥å…·è°ƒç”¨æµ‹è¯•ï¼ˆSet 3ï¼‰
- âœ… 8ä¸ªå¤šæ¨¡æ€è§†è§‰æµ‹è¯•ï¼ˆè±†åŒ…ï¼‰
- âœ… æ‰€æœ‰æ¥å£100%å¯ç”¨

### å·¥å…·é›†æˆ
- ğŸ” Tavily AI Searchï¼ˆæ›¿ä»£DuckDuckGoï¼Œæ›´å¯é ï¼‰
- ğŸŒ¤ï¸ å®æ—¶å¤©æ°”æŸ¥è¯¢ï¼ˆOpenWeather APIï¼‰
- ğŸ“ˆ å®æ—¶è‚¡ä»·æŸ¥è¯¢ï¼ˆYahoo Financeï¼‰
- ğŸ›ï¸ æœ¬åœ°RAGçŸ¥è¯†åº“ï¼ˆ175+æ–‡æ¡£å—ï¼‰

---


