# 项目信息

## 📋 项目公告

### Project Announcement: The Intelligent Search Engine

欢迎！这是ML for NLP项目的学期期末项目，Project ISE是一个为期10周的挑战，旨在设计和实现下一代智能搜索引擎。

在大模型时代，信息检索正在经历范式转变。简单的关键词匹配已不再足够。搜索的未来在于能够深入理解用户意图、动态与多样化数据源交互、并编排复杂工作流以提供精确、上下文感知答案的系统。Project ISE的目标就是构建这样的系统。

### 核心项目功能

您将团队合作实现一个具有以下核心能力的系统：

- **智能源选择**：给定用户查询，系统必须自动确定最合适的数据源。这可能包括网页搜索API、专业数据库或全面的本地知识库。
  - **本地RAG实现**：关键组件是构建和维护强大的本地知识库（检索增强生成）。您需要处理和索引提供的文档集，确保系统可以检索和综合网络上不可用的信息。
- **高级重排序和过滤**：系统必须超越标准相关性分数。它应该实现考虑上下文、源可信度和新鲜度的复杂重排序算法，向用户呈现最相关和可靠的结果。
- **动态工作流自动化**：引擎应该能够执行多步骤"工作流"来回答复杂查询。
- **多模态支持**：用户应该能够上传文件（如PDF、图片、代码片段）作为查询的一部分。
- **领域特定智能**：系统应该具有各种领域的专业能力，包括但不限于：
  - **天气**：回答天气预报查询
  - **交通**：回答旅行时间和物流查询
  - **金融**：检索股票或加密货币数据

### 技术框架

团队可以使用大模型API（如DeepSeek）来处理核心NLP任务。除此之外，您可以自由选择构建周围架构的技术栈，包括数据库、后端框架和重排序模型。

### 项目时间线和评估

这是一个10周的项目，旨在鼓励迭代开发和持续改进。

- **Week 4**: 项目启动和团队组建（已完成）
- **Week 4**: 测试集1发布（已完成）
- **Week 7**: 测试集2发布
- **Week 9**: 中期进度报告
- **Week 10**: 测试集3发布
- **Week 13**: 最终项目提交和演示

**评估标准**：最终提交将根据核心功能的成功实现进行评估，重点关注两个关键性能指标：

1. **准确性**：返回结果的相关性和正确性
2. **搜索时间**：从查询提交到结果呈现的整体延迟。您必须全面优化系统的速度和准确性
3. 不需要Web UI。您可以在命令行中运行系统。但是，如果您想实现Web UI，这是非常好的。

### 团队组建

您将组成**3-4人**的团队。团队合作和协作对于这种规模的项目至关重要。

---

## 🎯 项目执行规划

### 核心策略与技术栈

- **核心策略**: 采用"最小可行产品（MVP）优先"的迭代开发模式，先保证核心流程通畅，再逐步完善。
- **技术栈**:
  - **后端**: Python, FastAPI
  - **AI核心**: LangChain, DeepSeek API
  - **向量数据库**: Milvus
  - **前端**: Next.js (React), shadcn/ui
  - **部署**: Docker, Docker Compose

### 第一阶段：地基搭建与核心RAG流程贯通 (W4 - W6)

🎯 **目标**: 搭建一个可以实际操作的最小系统。它必须能完成：前端提问 -> 后端处理 -> Milvus检索 -> LLM生成 -> 前端展示 的完整闭环。

**关键任务**:
- **数据/运维工程师**: 部署Milvus、创建集合、编写数据注入脚本、封装检索函数
- **后端/AI工程师**: 搭建FastAPI项目、实现核心RAG接口、编写API文档
- **前端工程师**: 初始化项目、开发主搜索界面、实现API通信层

🏆 **阶段性成果**: 一个功能虽简单但完整的问答系统。

### 第二阶段：智能化扩展与能力增强 (W7 - W9)

🎯 **目标**: 系统升级为智能代理（Agent），能够根据问题类型自主选择工具，并引入二次排序机制以提升结果准确性。

**关键任务**:
- **后端/AI工程师**: 重构为Agent架构、开发并集成新工具（网页搜索、天气等）、实现智能路由与执行
- **数据/运维工程师**: 实现二次排序（Reranker）、准备测试
- **前端工程师**: 升级状态管理、丰富结果展示

🏆 **阶段性成果**: 一个具备初步智能的搜索引擎。

### 第三阶段：高级功能实现与全面优化 (W10 - W12)

🎯 **目标**: 实现所有项目要求的高级功能，包括多模态输入和动态工作流，并对系统的速度和准确性进行全面优化。

**关键任务**:
- **后端/AI工程师**: 实现动态工作流、支持多模态输入
- **数据/运维工程师**: 实现元数据过滤、系统性能优化
- **前端工程师**: 开发文件上传UI、最终UI/UX打磨

🏆 **阶段性成果**: 一个功能完整、性能优良、符合所有核心要求的智能搜索引擎。

### 第四阶段：冲刺与交付 (W13)

🎯 **目标**: 完成最终测试，准备好项目报告和演示，确保高质量交付。

**关键任务**:
- **全体成员**: 最终测试、Bug修复与代码文档、准备最终演示、项目提交

🏆 **阶段性成果**: 一份高质量、文档齐全、令人印象深刻的最终项目。

---

## 📊 项目当前状态

### 已完成功能

✅ **RAG检索增强生成**：基于Milvus向量数据库的语义检索，支持Reranker重排序  
✅ **多语言RAG支持**：支持粤语、普通话、英语的混合检索和生成  
✅ **Jarvis语音助手**：语音识别、唤醒词检测（"Jarvis"）、文本转语音  
✅ **流式STT/TTS**：实时语音转文本和文本转语音，降低延迟  
✅ **Mac MLX优化**：Lightning Whisper MLX和MLX LM，充分利用Apple Silicon  
✅ **多模态文件支持**：上传并处理PDF、图片、代码、文本等多种格式文件  
✅ **Agent智能工具**：自动选择RAG、网页搜索、天气、金融、交通等工具  
✅ **多LLM支持**：HKGAI（默认，支持多语言）、Gemini系列（备选）、MLX LM（Mac优化）  
✅ **用量监控**：Gemini API的token使用量和配额管理  
✅ **性能优化**：查询缓存、结果过滤、高级重排序  
✅ **可切换存储后端**：Milvus或传统数据库（SQLite/PostgreSQL）  
✅ **日志系统**：统一的日志管理，支持文件输出和日志轮转  
✅ **环境变量配置**：支持从`.env`文件和环境变量加载配置  

### 技术栈

- **后端框架**: FastAPI + Uvicorn
- **向量数据库**: Milvus
- **AI模型**: 
  - Whisper（语音识别）
  - Parler-TTS / MeloTTS / Edge TTS（文本转语音）
  - Sentence Transformers（Embedding）
  - Cross-Encoder（Reranker）
- **LLM**: HKGAI（默认）、DeepSeek（备选）、Gemini（备选）
- **Mac优化**: MLX框架、Lightning Whisper MLX

---

## 📝 项目文档

- **用户指南**: `docs/USER_GUIDE.md`
- **安装指南**: `docs/SETUP_GUIDE.md`
- **故障排查**: `docs/TROUBLESHOOTING.md`
- **技术文档**: `docs/TECHNICAL_ARCHIVE.md`

