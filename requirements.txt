# ============================================
# RAG问答系统 - Python依赖包
# ============================================

# === 核心框架 ===
# FastAPI Web框架
fastapi==0.104.1
uvicorn[standard]==0.24.0  # ASGI服务器，包含WebSocket支持
pydantic==2.5.0  # 数据验证
python-multipart==0.0.6  # 文件上传支持
python-jose[cryptography]>=3.3.0  # JWT token处理

# === 向量数据库 ===
# Milvus向量数据库客户端
pymilvus==2.3.4

# === AI模型和向量化 ===
# Sentence Transformers用于生成文本向量（包含CrossEncoder用于Reranker）
sentence-transformers>=2.2.2
# LangChain用于文本处理和RAG工作流
langchain>=0.1.0
langchain-community>=0.0.10
langchain-openai>=0.0.5  # OpenAI兼容接口（HKGAI、Doubao）
# LangGraph用于工作流和状态管理
langgraph>=0.0.20
# Token计数
tiktoken>=0.5.2
# Hugging Face模型下载
huggingface-hub>=0.20.0
# PyTorch（通过sentence-transformers自动安装，但明确列出）
torch>=2.0.0

# === LLM API客户端 ===
# OpenAI SDK（用于HKGAI、Doubao等兼容OpenAI接口的API）
openai>=1.10.0
# Google Generative AI（Gemini，可选）
google-generativeai>=0.3.0

# === 文档处理 ===
# PDF处理
PyMuPDF==1.23.8  # 快速PDF文本提取
pypdf==3.17.0  # PDF备用库
# Word文档处理
python-docx==1.1.0

# === 图片处理（可选）===
# Pillow - 图片处理基础库
Pillow>=10.0.0
# pytesseract - OCR文字识别（可选）
# 注意：需要系统安装Tesseract OCR
#   macOS: brew install tesseract tesseract-lang
#   Ubuntu: sudo apt-get install tesseract-ocr tesseract-ocr-chi-sim
#   如果未安装，图片OCR功能将被禁用，但不影响其他功能
pytesseract>=0.3.10

# === 数据库支持（可选，用于传统数据库后端）===
# SQLAlchemy - 支持SQLite和PostgreSQL
# 默认使用Milvus后端，如需传统数据库可配置STORAGE_BACKEND="database"
sqlalchemy==2.0.23

# === HTTP客户端 ===
# HTTP请求库
requests==2.31.0  # 同步HTTP请求（用于LLM API调用）
httpx==0.25.2  # 异步HTTP客户端（用于Agent工具）

# === 外部API和工具 ===
# Web搜索
tavily-python>=0.3.0  # Tavily AI Search
duckduckgo-search>=4.0.0  # DuckDuckGo搜索（备用）
# 金融数据
yfinance>=0.2.35  # Yahoo Finance API（股票、金融数据）
# 天气数据（通过requests调用OpenWeatherMap API）
# 交通数据（通过requests调用HK Transport API）

# === 工具库 ===
# 环境变量管理
python-dotenv==1.0.0
# 日期时间处理
python-dateutil>=2.8.2
# JSON处理增强
orjson>=3.9.0  # 更快的JSON解析（可选）
# 数据处理
pandas>=2.0.0  # 数据分析（yfinance依赖）

# === 语音识别和合成 ===
# OpenAI Whisper - 高质量语音识别（支持多语言：粤语、普通话、英语）
openai-whisper>=20231117
# Faster Whisper - 更快的Whisper实现（支持流式）
faster-whisper>=0.10.0  # 可选，用于流式STT
# 音频文件处理
soundfile>=0.12.1  # 处理音频文件格式转换
pydub>=0.25.1  # 音频格式转换（WebM转WAV）需要ffmpeg（macOS: brew install ffmpeg）
# 文本转语音
edge-tts>=6.1.0  # Edge TTS（免费，支持多语言，包括粤语、普通话、英语）
# PyAudio - 音频录制和播放（可选，用于实时录音）
# pyaudio>=0.2.14  # 需要系统安装PortAudio（macOS: brew install portaudio）
# Silero VAD - 语音活动检测（可选）
# silero-vad>=4.0.0  # 需要torch
# onnxruntime>=1.16.0  # Silero VAD依赖（可选）

# === 开发和测试工具（可选）===
# pytest>=7.4.0  # 单元测试
# pytest-asyncio>=0.21.0  # 异步测试
# black>=23.0.0  # 代码格式化
# flake8>=6.0.0  # 代码检查

# === 其他依赖 ===
# 以下依赖会自动通过上述包安装，无需手动指定：
# - numpy, scipy, scikit-learn (sentence-transformers依赖)
# - transformers (sentence-transformers依赖)
# - pyarrow (pymilvus依赖)
# - grpcio, protobuf (pymilvus依赖)

